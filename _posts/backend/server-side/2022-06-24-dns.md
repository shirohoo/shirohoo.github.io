---
layout: post
category:
    - backend
    - server-side
title: DNSλ” λ¬΄μ—‡μ΄κ³ , μ–΄λ–»κ² λ™μ‘ν• κΉ?
description: >
    IPμ™€ λ„λ©”μΈμ„ μƒνΈ λ³€ν™ν•΄μ£Όλ” μ‹μ¤ν…
image: /assets/img/common/code1.png
related_posts:
    - _posts/backend/server-side/2021-12-11-http-cache.md
---

* toc 
{:toc}

<br />

# DNS(Domain Name System)

---

DNSλ” `Domain Name Server`κ°€ μ•„λ‹κ³  `Domain Name System`μ΄λ‹¤.
{:.note}

<br />

DNSλ” μ‚¬λμ΄ μ‰½κ² μ•μ•„λ³Ό μ μλ” λ¬Έμλ¥Ό μ„λ²„μ μ£Όμ†(IP)λ΅ μƒνΈ λ³€ν™ν•΄μ£Όλ” μ‹μ¤ν…μ΄λ‹¤.

μ΄ DNSκ°€ μ—†λ μ›λ‚ μ—λ” κµ¬κΈ€μ— μ ‘μ†ν•κΈ° μ„ν•΄ google.comμ„ μ…λ ¥ν•λ”κ²ƒμ΄ μ•„λ‹, 142.250.196.110κ°™μ€ IPλ¥Ό μ…λ ¥ν•΄μ•Ό ν–μ—λ‹¤κ³  ν•λ‹¤.

μ°Έκ³ λ΅ DNS ν†µμ‹ μ well known portλ” 53μ΄κ³ , TCP/UDP λ°©μ‹μΌλ΅ λ™μ‘ν•λ‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/175770494-095651c1-c7e7-415b-9e71-bcd9d69b3148.png)

[π“ IANA - well known ports](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=domain){:target="_blank"}
{:.figcaption}

<br />

## μ©μ–΄

---

- Local DNS
    - κΈ°μ§€κµ­μ DNS μ„λ²„μ΄λ‹¤.
    - μ»΄ν“¨ν„°κ°€ LANμ„ ν†µν•΄ μΈν„°λ„·μ— μ—°κ²°λλ©΄, μΈν„°λ„·μ„ μ‚¬μ©ν•  μ μκ² IPλ¥Ό ν• λ‹Ήν•΄μ£Όλ” ν†µμ‹ μ‚¬(KT, SK, LG)λ“¤μ DNS μ„λ²„λ¥Ό λ§ν•λ‹¤.
    - μ΄μ‚¬κ°€λ©΄ μΈν„°λ„· μ—°κ²°μ„ μ„ν•΄ μ–΄λ””μ— μ „ν™”λ¥Ό κ±Έκ²λλ”μ§€ μƒκ°ν•΄λ³΄μ

<br />

- Root DNS
    - Local DNSμ μƒμ„ DNS μ„λ²„μ΄λ©°, μµμƒμ„ DNS μ„λ²„μ΄λ‹¤.
    - μ „ μ„Έκ³„μ μ£Όμ” λ„μ‹μ— μ΅΄μ¬ν•λ©°, νΈλ¦¬ κµ¬μ΅°λ΅ ν•μ„μ— λ§μ€ DNS μ„λ²„λ“¤μ„ μ•κ³  μλ‹¤.
    - [π“ root.server.org](https://root-servers.org/){:target="_blank"} λ¥Ό μ°Έκ³ ν•΄λ³΄μ.

<br />

- μµμƒμ„ λ„λ©”μΈ(Top-Level Domain, TLD)
    - κµ­κ°€ μ½”λ“ μµμƒμ„ λ„λ©”μΈ(Country Code Top-Level Domain, ccTLD)
    - μΌλ° μµμƒμ„ λ„λ©”μΈ(Generic Top-Level Domain, gTLD)
    - μ™Έ λ‚λ¨Έμ§€λ” [π“ μΈν„°λ„· μµμƒμ„ λ„λ©”μΈ λ©λ΅](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%EC%B5%9C%EC%83%81%EC%9C%84_%EB%8F%84%EB%A9%94%EC%9D%B8_%EB%AA%A9%EB%A1%9D){:target="_blank"}μ„ ν™•μΈ

<br />

## νλ¦„

---

<br />

![image](https://user-images.githubusercontent.com/71188307/175438394-c70b00ef-e9fb-418a-a85e-5714a9a93ff0.png)

μ„ μ΄λ―Έμ§€λ” AWSμ—μ„ μ κ³µν•λ” DNSμ— λ€ν• κ°μ”μ΄λ‹¤.

μ΄λ―Έμ§€λ¥Ό μ”μ•½ν•μλ©΄ λ‹¤μκ³Ό κ°™λ‹¤. (μ ‘μ†μ€ google.comμ— μ ‘μ†ν•λ‹¤κ³  κ°€μ •ν•λ‹¤)

<br />

1. ν΄λΌμ΄μ–ΈνΈκ°€ λΈλΌμ°μ €μ μ£Όμ†μ°½μ— google.comμ„ μ…λ ¥ν•λ‹¤
2. ν΄λΌμ΄μ–ΈνΈ μ»΄ν“¨ν„°μ hosts νμΌμ—μ„ google.comμ IP μ£Όμ† μ •λ³΄κ°€ μλ”μ§€ ν™•μΈν•λ‹¤
    - `μλ„μ°`: <u>C:\Windows\System32\drivers\etc\hosts</u>
    - `λ¦¬λ…μ¤`: <u>/etc/hosts</u>
3. hosts νμΌμ— IP μ£Όμ† μ •λ³΄κ°€ μ—†λ‹¤λ©΄ PCμ DNS μΊμ‹λ¥Ό ν™•μΈν•λ‹¤
    - `μλ„μ°`: <u>cmd -> ipconfig/displaydns μ…λ ¥μ‹ ν™•μΈ κ°€λ¥</u>
    - `λ¦¬λ…μ¤`: [π“ How to inspect the DNS cache on Windows, Mac OS X, and Linux](https://netbeez.net/blog/how-dns-cache-works/){:target="_blank"} μ°Έκ³ 
4. DNS μΊμ‹μ—λ„ IP μ£Όμ† μ •λ³΄κ°€ μ—†λ‹¤λ©΄ Local DNSμ— google.comμ IP μ£Όμ†μ— λ€ν•΄ μ§μ(Query)ν•λ‹¤.
5. Local DNSλ” μμ‹ μ DNS μΊμ‹μ—μ„ IP μ£Όμ† μ •λ³΄λ¥Ό μ°Ύκ³ , μ—†λ‹¤λ©΄ Root DNSμ— μ§μν•λ‹¤.
6. Root DNSλ” μμ‹ μ΄ google.comμ IP μ£Όμ† μ •λ³΄λ¥Ό κ°–κ³ μμ§€ μ•λ‹¤λ©΄, TLD(Top-Level Domain) DNS μ„λ²„μ μ£Όμ†λ¥Ό μ•λ ¤μ¤€λ‹¤
    - μ—¬κΈ°μ„ google.comμ΄λ‹ TLDλ” .comμ΄ λλ‹¤. μ¦‰, gTLD
7. Local DNSλ” λ‹¤μ‹ com DNSμ— google.comμ IP μ£Όμ† μ •λ³΄λ¥Ό μ§μν•λ‹¤
8. com DNSμ—μ„ google.comμ IP μ£Όμ†μΈ 142.250.196.110μ„ μ‘λ‹µν•΄μ¤€λ‹¤
9. Local DNSλ” ν΄λΌμ΄μ–ΈνΈμ— 142.250.196.110λ¥Ό μ‘λ‹µν•΄μ£Όκ³ , μ΄ IP μ£Όμ†λ¥Ό μμ‹ λ„ μΊμ‹±ν•λ‹¤
10. ν΄λΌμ΄μ–ΈνΈλ” Local DNSμ—κ² λ°›μ€ 14.250.196.110μ„ μΊμ‹±ν•κ³ , μ΄ν›„ μ„ μ£Όμ†λ΅ λ‹¤μ‹ μ”μ²­μ„ μ΄μ–΄λ‚κ°„λ‹¤

<br />

URLμ„ λ―μ–΄λ³΄λ©΄ DNS κ΄€μ μ—μ„ λ‹¤μκ³Ό κ°™μ΄ λ‚λ μ μλ”λ°, λ‹¤μκ³Ό κ°™λ‹¤. (HTTP κ΄€μ κ³Όλ” μ•½κ°„ λ‹¤λ¦„)

<br />

![image](https://user-images.githubusercontent.com/71188307/175770125-ba20530e-b9e6-49f3-8004-46ae809f53a5.png)

<br />

μ„ νλ¦„μ—μ„λ„ μ• μ μλ“―μ΄, Local DNSμ—μ„ Root DNSλ΅ μ§μν•λ©΄, Root DNSμ—μ„ λ¨λ“ κ±Έ μ•μ•„μ„ μ°Ύμ•„μ£Όλ” κ²ƒμ΄ μ•„λ‹κ³ , Root DNSλ” Local DNSμ— TLD DNSμ μ •λ³΄λ¥Ό μ•λ ¤μ£Όκ² λλ‹¤.

κ·ΈλΌ Local DNSλ” TLD DNSμ—κ² λ‹¤μ‹ λ¬Όμ–΄λ³΄λ©° DNS νΈλ¦¬κµ¬μ΅°λ¥Ό νƒ€κ³  λ‚΄λ ¤κ°„λ‹¤.

λ¨λ“  λ…Έλ“λ¥Ό νƒμƒ‰ν• λ•κΉμ§€ μ΄ κ³Όμ •μ΄ λ°λ³µλκΈ°μ— μ΄κ²ƒμ„ `Recursive Query`λΌκ³  λ¶€λ¥Έλ‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/175441665-45c52aae-2faa-44bc-b26e-39309ca59465.png)

μ¶μ² - κµ¬κΈ€ μ΄λ―Έμ§€ κ²€μƒ‰
{:.figcaption}

<br />

## μΊμ‹±

---

μ„ κ³Όμ •λ“¤μ„ λ³΄λ©΄ μµμ΄μ— DNS μΊμ‹λ¥Ό λ¨Όμ € μ΅°νν•κ³ , λ§μ§€λ§‰μ—λ„ μ°Ύμ€ μ •λ³΄λ¥Ό DNS μΊμ‹μ— μΊμ‹±ν•λ‹¤.

μ΄λ” μƒκ°ν•΄λ³΄λ©΄ μ•„μ£Ό λ‹Ήμ—°ν• μΌμΈλ°, google.comμ IP μ£Όμ†λ¥Ό μ°ΎκΈ° μ„ν•΄ μ–Όλ§λ‚ λ³µμ΅ν•κ³  λ§μ€ μ§μκ°€ μ΄λ£¨μ–΄μ΅λ”κ°€?

λΈλΌμ°μ €μ— google.comμ„ μ…λ ¥ ν•  λ•λ§λ‹¤ μ„μ κ³Όμ •μ„ λ¨λ‘ λ°λ³µν•λ©΄ μ΄λ” λ§¤μ° λΉ„ν¨μ¨μ μ΄λ©°, DNS μ„λ²„λ“¤μ€ μ „κµ­, μ „μ„Έκ³„λ‹¨μ„μ μ”μ²­μ„ λ°›κΈ° λ•λ¬Έμ— DNS μ„λ²„λ“¤μ— κ³Όλ¶€ν•κ°€ κ° μ λ°–μ— μ—†λ‹¤.

λν• λ„λ©”μΈκ³Ό IPλ” μƒκ°λ³΄λ‹¤ κ·Έλ ‡κ² μμ£Ό λ³€κ²½λμ§€ μ•κΈ° λ•λ¬Έμ—, μΊμ‹±ν–μ„ λ•μ κΈ°λ€ ν¨μ¨μ΄ λ†’μ„ μ λ°–μ— μ—†λ‹¤.

<br />