---
layout: post
category:
    - diary
date: 2021-05-27 21:19
title: ë¬¸ìì—´ ê³„ì‚°ê¸°
description: >
    ìë°”ë¡œ ë§Œë“œëŠ” ë¬¸ìì—´ ê³„ì‚°ê¸°
image: /assets/img/debugging/debugging.jpg
accent_image:
    background: url('/assets/img/debugging/debugging.jpg') center/cover
related_posts:
    -
---

* toc
{:toc}

&nbsp;  

# ğŸ“• ìš”êµ¬ì‚¬í•­

---

- ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¬¸ìì—´ ê°’ì— ë”°ë¼ ì‚¬ì¹™ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê³„ì‚°ê¸°ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.
- ë¬¸ìì—´ ê³„ì‚°ê¸°ëŠ” ì‚¬ì¹™ì—°ì‚°ì˜ ê³„ì‚° ìš°ì„ ìˆœìœ„ê°€ ì•„ë‹Œ ì…ë ¥ ê°’ì— ë”°ë¼ ê³„ì‚° ìˆœì„œê°€ ê²°ì •ëœë‹¤. ì¦‰, ìˆ˜í•™ì—ì„œëŠ” ê³±ì…ˆ, ë‚˜ëˆ—ì…ˆì´ ë§ì…ˆ, ëº„ì…ˆ ë³´ë‹¤ ë¨¼ì € ê³„ì‚°í•´ì•¼ í•˜ì§€ë§Œ ì´ë¥¼ ë¬´ì‹œí•œë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ `2 + 3 \* 4 / 2`ì™€ ê°™ì€ ë¬¸ìì—´ì„ ì…ë ¥í•  ê²½ìš° `2 + 3 \* 4 / 2` ì‹¤í–‰ ê²°ê³¼ì¸ `10`ì„ ì¶œë ¥í•´ì•¼ í•œë‹¤.

&nbsp;  

```java
public class StringCalculator {
    
    private String[] values;
    
    private LinkedList<Double> operands;
    private LinkedList<String> operators;
    
    private double result;
    
    public StringCalculator() {
        this(new LinkedList<>(), new LinkedList<>());
    }
    
    private StringCalculator(LinkedList<Double> operands, LinkedList<String> operators) {
        this.operands = operands;
        this.operators = operators;
    }
    
    public double getResult() {
        return result;
    }
    
    public void calculate() {
        result = operands.poll();
        while(operands.size() != 0) {
            Operator operator = Operator.of(operators.poll());
            result = operator.calculate(result, operands.poll());
        }
    }
    
    public void enter(final String s) {
        values = s.split(" ");
        if(values.length < 3) {
            throw new IllegalArgumentException("ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
        for(int i = 0; i < values.length; i++) {
            validate(i, values[i]);
            add(values[i]);
        }
    }
    
    private void validate(final int idx, final String value) {
        if(idx % 2 == 0 && !isNumeric(value)) {
            throw new IllegalArgumentException("ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
        if(idx % 2 == 1 && isNumeric(value)) {
            throw new IllegalArgumentException("ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
    }
    
    private void add(final String value) {
        if(isNumeric(value)) {
            operands.add(valueOf(value));
        }
        if(!isNumeric(value)) {
            operators.add(value);
        }
    }
    
    private static boolean isNumeric(final String s) {
        if("".equals(s)) {
            return false;
        }
        return s.matches("-?\\d+(\\.\\d+)?");
    }
    
    private enum Operator {
        PLUS("+", (e1, e2)->e1 + e2),
        MINUS("-", (e1, e2)->e1 - e2),
        DIVISION("/", (e1, e2)->e1 / e2),
        MULTI("*", (e1, e2)->e1 * e2);
        
        private String operator;
        private BinaryOperator<Double> operating;
        
        Operator(final String operator, final BinaryOperator<Double> operating) {
            this.operator = operator;
            this.operating = operating;
        }
        
        private static Operator of(final String operator) {
            return Arrays.stream(Operator.values())
                         .filter(value->value.operator.equals(operator))
                         .findFirst()
                         .orElseThrow(()->new IllegalArgumentException("ìœ íš¨í•œ ì—°ì‚°ì í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤."));
        }
        
        private Double calculate(final Double e1, final Double e2) {
            return operating.apply(e1, e2);
        }
    }
    
}
```

&nbsp;  

```java
class StringCalculatorTest {
    
    StringCalculator calculator;
    
    @BeforeEach
    void setUp() {
        calculator = new StringCalculator();
    }
    
    @DisplayName("ì…ë ¥_í…ŒìŠ¤íŠ¸")
    @ParameterizedTest
    @ValueSource(strings = {"",
                            "++*/",
                            "12345",
                            "2 3 42",
                            "2 + + * 4 / 2",
                            "+ + + + + + /,"})
    void enter(String param) {
        assertThatThrownBy(()->{
            calculator.enter(param);
        }).isInstanceOf(IllegalArgumentException.class)
          .hasMessageContaining("ì…ë ¥ê°’ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤");
    }
    
    @DisplayName("ê³„ì‚°_í…ŒìŠ¤íŠ¸")
    @ParameterizedTest
    @CsvSource(value = {"1 + 2:3",
                        "4 - 2:2",
                        "6 * 2:12",
                        "8 / 4:2",
                        "2 * 3 / 3 / 2:1",
                        "2 + 3 * 4 / 2:10"}, delimiter = ':')
    void calculate(String param, double expected) {
        calculator.enter(param);
        calculator.calculate();
        assertThat(calculator.getResult()).isEqualTo(expected);
    }
    
}
```

&nbsp;  
