---
layout: post
category:
  - diary
title: ì½”ë“œ ì¹´íƒ€ - ìˆ«ì ì•¼êµ¬ ê²Œì„
description: |
  TDDì™€ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ í›ˆë ¨
image: /assets/img/debugging/debugging.jpg
accent_image:
  background: url('/assets/img/debugging/debugging.jpg') center/cover
related_posts:
  - null
published: true
---

* toc
{:toc}
  
<br />

# ì½”ë“œì¹´íƒ€(Code Kata)

- [ğŸ“œ CodeKata - Because experience is the only teacher](http://codekata.com/)

---

ì–´ë–»ê²Œ í•˜ë©´ í›Œë¥­í•œ ìŒì•…ê°€ê°€ ë  ìˆ˜ ìˆì„ê¹Œìš”?

ìš°ì„ , ì´ë¡ ì„ ì•Œë©´ ì•…ê¸°ì˜ ì—­í•™ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ê¶ê·¹ì ìœ¼ë¡œ í›Œë¥­í•œ ì‹¤ë ¥ì€ ì´ëŸ¬í•œ ì´ë¡ ì´ ì•„ë‹Œ ì§€ì†ì ì´ê³  ë°˜ë³µì ì¸ í›ˆë ¨ì—ì„œ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•„ì•¼ í•©ë‹ˆë‹¤.

ë˜í•œ, ì´ëŸ¬í•œ ë°˜ë³µì ì¸ í›ˆë ¨ì— ì´ë¡ ì„ ì ìš©í•˜ë©° ê²°ê³¼ë¥¼ ì–»ê³ , ê²°ê³¼ì— ëŒ€í•œ í”¼ë“œë°±ì„ í•œë‹¤ë©´ ë”ë”ìš± ì¢‹ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤.

<br />

ìœ„ëŒ€í•œ ìŠ¤í¬ì¸  ì„ ìˆ˜ê°€ ë˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?

ì„ ì²œì ì¸ ì²´ë ¥ê³¼ ì¬ëŠ¥ì€ ë¶„ëª…íˆ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ì¬ëŠ¥ë“¤ê³¼ ë³„ê°œë¡œ ëª¨ë“  ìœ„ëŒ€í•œ ìŠ¤í¬ì¸  ì„ ìˆ˜ë“¤ì€ ë³´ì´ì§€ ì•ŠëŠ” ê³³ì—ì„œ ë§¤ì¼ ê¸´ ì‹œê°„ ë™ì•ˆì˜ í”¼ë‚˜ëŠ” í›ˆë ¨ì„ í–ˆìŒì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.

<br />

ì¼ë°˜ì ìœ¼ë¡œ ì†Œí”„íŠ¸ì›¨ì–´ ì‚°ì—…í˜„ì¥ì—ì„œ ìš°ë¦¬ëŠ” ì´ë¡ ë§Œ í›ˆë ¨ë°›ì€ ê°œë°œìë¥¼ ë°ë ¤ì™€ í”„ë¡œì íŠ¸ì— íˆ¬ì…ì‹œí‚¤ê³  í”„ë¡œì íŠ¸ê°€ ì˜ ëŒì•„ê°€ê¸¸ ì›í•©ë‹ˆë‹¤.

ì´ê²ƒì€ ê±´ê°•í•œ ì•„ì´ë“¤ì„ ëª‡ ëª¨ìœ¼ë©´ ì›Œì‹±í„´ ì»¤ë§¨ë”ìŠ¤ë¥¼ ì´ê¸¸ ìˆ˜ ìˆë‹¤ê³  ë§í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

<br />

ìš°ë¦¬ëŠ” ì§ì¥ì—ì„œ í›ˆë ¨ì„ í•˜ê¸° ë•Œë¬¸ì— ì‹¤ìˆ˜ë¥¼ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì¼ê³¼ í›ˆë ¨ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì°¾ê³  ì§€ì†ì ìœ¼ë¡œ í›ˆë ¨í•˜ê³  ì„±ì¥í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.

<br />

## ì½”ë“œ ì¹´íƒ€, ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ê°€?

---

- ëˆ„êµ¬ì—ê²Œë„ ë°©í•´ë°›ì§€ ì•ŠëŠ” ì‹œê°„ì´ í•„ìš”í•˜ë©°, ê°€ë³ê²Œ ì‹œë„í•´ë³´ê³  ì‹¶ì€ ë‹¨ìˆœí•œ ì£¼ì œê°€ í•„ìš”í•©ë‹ˆë‹¤.

- í•„ìš”í•˜ê±°ë‚˜ ë§Œì¡±ìŠ¤ëŸ¬ìš¸ ë§Œí¼ ì—¬ëŸ¬ ë²ˆ ì‰½ê²Œ ì‹œë„í•˜ê³ , ë¬´ì—‡ë³´ë‹¤ ì‹¤ìˆ˜ë¥¼ í•˜ëŠ” ê²ƒì´ ë‘ë µì§€ ì•Šê³  í¸ì•ˆí•´ì•¼ë§Œ í•©ë‹ˆë‹¤.

- ê°œì„ ì„ ìœ„í•´ ë…¸ë ¥í•  ìˆ˜ ìˆë„ë¡ ë§¤ë²ˆ í”¼ë“œë°±ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.

- ì™¸ë¶€ì˜ ì••ë ¥ì´ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤. ì‹¬ì‹ ì´ í¸ì•ˆí•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬í•˜ì—¬ ì˜¤ë¡œì§€ í›ˆë ¨ì—ë§Œ ëª°ì… í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

<br />

ì´ê²ƒì´ í”„ë¡œì íŠ¸ í™˜ê²½ì—ì„œ ì„±ì¥í•˜ê¸° ì–´ë µê³ , ì‹¤ìˆ˜ê°€ ì¦ì•„ì§€ëŠ” ì´ìœ ì…ë‹ˆë‹¤.

<br />

ì¹´íƒ€ëŠ” í•œ í˜•íƒœë¥¼ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•˜ë©´ì„œ ì¡°ê¸ˆì”© ê°œì„ ë˜ëŠ” ê°€ë¼ë°ì˜ í›ˆë ¨ì…ë‹ˆë‹¤.

ì½”ë“œ ì¹´íƒ€ì˜ ì˜ë„ëŠ” ê°€ë¼ë°ì˜ ì¹´íƒ€ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.

ë‘˜ ëª¨ë‘ ë‹¨ìˆœíˆ ì§§ì€ ë°˜ë³µ í›ˆë ¨ì…ë‹ˆë‹¤. (ì•½ 30ë¶„ì—ì„œ 1ì‹œê°„ ì •ë„)

<br />

ì¹´íƒ€ë¥¼ ë°˜ë³µ í•  ìˆ˜ë¡ ì½”ë“œê°€ ì ì  ë” ì¢‹ì•„ì§€ëŠ” ê²ƒì„ ë³´ê²Œ ë  ê²ƒì´ê¸° ë•Œë¬¸ì— í•˜ë©´ í•  ìˆ˜ë¡ ì´ í›ˆë ¨ì´ ì•„ì£¼ ì¢‹ë‹¤ëŠ” ê²ƒì„ ìŠ¤ìŠ¤ë¡œ ì¸ì‹í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.

ë˜í•œ, ìŠ¤ìŠ¤ë¡œê°€ ì„±ì¥í•œë‹¤ëŠ” ê²ƒì„ ì§ì ‘ì ìœ¼ë¡œ ëŠë‚„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¹´íƒ€ëŠ” ê°œë°œì— ì¬ë¯¸ë¥¼ ëŠë¼ëŠ” ë°ì—ë„ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.

<br />

ëˆ„êµ°ê°€ëŠ” ì¹´íƒ€ë¥¼ í•˜ë©° ë‹¨ìˆœíˆ ì½”ë”©í•˜ëŠ” ê²ƒì„ ë– ë‚˜ ì„¤ê³„ê¹Œì§€ ê³ ë ¤ í•  ê²ë‹ˆë‹¤.

ë˜ ëˆ„êµ°ê°€ëŠ” ì¹´íƒ€ë¥¼ ì§„í–‰í•˜ë©° í”„ë¡œê·¸ë˜ë° ì´ë©´ì˜ ë¬¸ì œì— ëŒ€í•œ ê³ ë¯¼ì„ í•  ê²ë‹ˆë‹¤.

ì¦‰, ì¹´íƒ€ì—ëŠ” ì •ë‹µì´ ì—†ìŠµë‹ˆë‹¤.

<br />

ì›í•˜ëŠ” í›ˆë ¨ì„ í•˜ì„¸ìš”. ì›í•˜ëŠ” ê³µì˜ˆì— ì¶©ë¶„í•œ ì‹œê°„ì„ íˆ¬ìí•˜ì„¸ìš”.

ì¹´íƒ€ì˜ ìš”ì ì€ ì •ë‹µì´ ì—†ë‹¤ëŠ” ê²ƒì´ë©°, ì„¤ë ¹ ì •ë‹µì´ ìˆë‹¤ê³  í•˜ë”ë¼ë„ ê·¸ ì •ë‹µì´ ì¤‘ìš”í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ì ì…ë‹ˆë‹¤.

ì¤‘ìš”í•œ ê²ƒì€ ê²°ê³¼ê°€ ì•„ë‹Œ ì¹´íƒ€ë¥¼ ì§„í–‰í•˜ë©° ê³ ë¯¼í•˜ëŠ” ê³¼ì • ê·¸ ìì²´ì…ë‹ˆë‹¤.

<br />

# ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ 3ëŒ€ ì›ì¹™

---

ë‚˜ëŠ” ìµœëŒ€í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ 3ëŒ€ ì›ì¹™ê³¼ ê°ì²´ì§€í–¥ 5ëŒ€ ì›ì¹™(SOLID)ì„ ê³ ë¯¼í•˜ë©´ì„œ í›ˆë ¨ì— ì„í•  ê²ƒì´ë‹¤.

- KISS(Keep It Simple Stupid): ìµœëŒ€í•œ ë‹¨ìˆœí•˜ê²Œ í•´ë¼
- YAGNI(You Ain't Gonna Need It): í•„ìš”í•œ ê²ƒë§Œ í•´ë¼
- DRY(Do not Repeat Yourself): ê°™ì€ ê²ƒì„ ë°˜ë³µí•˜ì§€ ë§ˆë¼ 

# ìˆ«ì ì•¼êµ¬ ê²Œì„

![Java_17](https://img.shields.io/badge/java-17-red?logo=java)

---

- [ğŸ“œ NextStep - ìˆ«ì ì•¼êµ¬ ê²Œì„ ì €ì¥ì†Œ](https://github.com/next-step/java-baseball-playground)

<br />

## ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­

---

ê¸°ë³¸ì ìœ¼ë¡œ 1ë¶€í„° 9ê¹Œì§€ ì„œë¡œ ë‹¤ë¥¸ ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ 3ìë¦¬ì˜ ìˆ˜ë¥¼ ë§ì¶”ëŠ” ê²Œì„ì´ë‹¤.

- ê°™ì€ ìˆ˜ê°€ ê°™ì€ ìë¦¬ì— ìˆìœ¼ë©´ ìŠ¤íŠ¸ë¼ì´í¬, ë‹¤ë¥¸ ìë¦¬ì— ìˆìœ¼ë©´ ë³¼, ê°™ì€ ìˆ˜ê°€ ì „í˜€ ì—†ìœ¼ë©´ í¬ë³¼ ë˜ëŠ” ë‚«ì‹±ì´ë€ íŒíŠ¸ë¥¼ ì–»ê³ , ê·¸ íŒíŠ¸ë¥¼ ì´ìš©í•´ì„œ ë¨¼ì € ìƒëŒ€ë°©(ì»´í“¨í„°)ì˜ ìˆ˜ë¥¼ ë§ì¶”ë©´ ìŠ¹ë¦¬í•œë‹¤.
  - e.g. ìƒëŒ€ë°©(ì»´í“¨í„°)ì˜ ìˆ˜ê°€ 425ì¼ ë•Œ, 123ì„ ì œì‹œí•œ ê²½ìš° : 1ìŠ¤íŠ¸ë¼ì´í¬, 456ì„ ì œì‹œí•œ ê²½ìš° : 1ë³¼ 1ìŠ¤íŠ¸ë¼ì´í¬, 789ë¥¼ ì œì‹œí•œ ê²½ìš° : ë‚«ì‹±
- ìœ„ ìˆ«ì ì•¼êµ¬ ê²Œì„ì—ì„œ ìƒëŒ€ë°©ì˜ ì—­í• ì„ ì»´í“¨í„°ê°€ í•œë‹¤. ì»´í“¨í„°ëŠ” 1ì—ì„œ 9ê¹Œì§€ ì„œë¡œ ë‹¤ë¥¸ ì„ì˜ì˜ ìˆ˜ 3ê°œë¥¼ ì„ íƒí•œë‹¤. ê²Œ ì„ í”Œë ˆì´ì–´ëŠ” ì»´í“¨í„°ê°€ ìƒê°í•˜ê³  ìˆëŠ” 3ê°œì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ê³ , ì»´í“¨í„°ëŠ” ì…ë ¥í•œ ìˆ«ìì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤.
- ì´ ê°™ì€ ê³¼ì •ì„ ë°˜ë³µí•´ ì»´í“¨í„°ê°€ ì„ íƒí•œ 3ê°œì˜ ìˆ«ìë¥¼ ëª¨ë‘ ë§íˆë©´ ê²Œì„ì´ ì¢…ë£Œëœë‹¤.
- ê²Œì„ì„ ì¢…ë£Œí•œ í›„ ê²Œì„ì„ ë‹¤ì‹œ ì‹œì‘í•˜ê±°ë‚˜ ì™„ì „íˆ ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.

<br />

## ì‹¤í–‰ ê²°ê³¼

---

```shell
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 123
1ë³¼ 1ìŠ¤íŠ¸ë¼ì´í¬
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 145
1ë³¼
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 671
2ë³¼
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 216
1ìŠ¤íŠ¸ë¼ì´í¬
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 713
3ìŠ¤íŠ¸ë¼ì´í¬
3ê°œì˜ ìˆ«ìë¥¼ ëª¨ë‘ ë§íˆì…¨ìŠµë‹ˆë‹¤! ê²Œì„ ì¢…ë£Œ
ê²Œì„ì„ ìƒˆë¡œ ì‹œì‘í•˜ë ¤ë©´ 1, ì¢…ë£Œí•˜ë ¤ë©´ 2ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
1
ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : 123
1ë³¼ 1ìŠ¤íŠ¸ë¼ì´í¬
â€¦
```

<br />

## í”„ë¡œê·¸ë˜ë° ìš”êµ¬ì‚¬í•­

---

- ìë°” ì½”ë“œ ì»¨ë²¤ì…˜ì„ ì§€í‚¤ë©´ì„œ í”„ë¡œê·¸ë˜ë°í•œë‹¤.
  - ê¸°ë³¸ì ìœ¼ë¡œ Google Java Style Guideì„ ì›ì¹™ìœ¼ë¡œ í•œë‹¤.
  - ë‹¨, ë“¤ì—¬ì“°ê¸°ëŠ” '2 spaces'ê°€ ì•„ë‹Œ '4 spaces'ë¡œ í•œë‹¤.
- indent(ì¸ë´íŠ¸, ë“¤ì—¬ì“°ê¸°) depthë¥¼ 2ê°€ ë„˜ì§€ ì•Šë„ë¡ êµ¬í˜„í•œë‹¤. 1ê¹Œì§€ë§Œ í—ˆìš©í•œë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ whileë¬¸ ì•ˆì— ifë¬¸ì´ ìˆìœ¼ë©´ ë“¤ì—¬ì“°ê¸°ëŠ” 2ì´ë‹¤.
- else ì˜ˆì•½ì–´ë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤.
- ëª¨ë“  ë¡œì§ì— ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•œë‹¤. ë‹¨, UI(System.out, System.in) ë¡œì§ì€ ì œì™¸
- í•µì‹¬ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œì™€ UIë¥¼ ë‹´ë‹¹í•˜ëŠ” ë¡œì§ì„ êµ¬ë¶„í•œë‹¤.
- 3í•­ ì—°ì‚°ìë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤.
- í•¨ìˆ˜(ë˜ëŠ” ë©”ì†Œë“œ)ê°€ í•œ ê°€ì§€ ì¼ë§Œ í•˜ë„ë¡ ìµœëŒ€í•œ ì‘ê²Œ ë§Œë“¤ì–´ë¼.

<br />

## ê¸°ëŠ¥ ì •ì˜ ë° ì±…ì„ í• ë‹¹

ìš°ì„  ê¼­ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì •ì˜í•´ì•¼ í•œë‹¤.

êµ¬í˜„ ì¤‘ê°„ì— ì„¸ì„¸í•˜ê²Œ ë°”ë€”ìˆ˜ëŠ” ìˆê² ì§€ë§Œ ê±°ì‹œì ìœ¼ë¡œ ë³´ë©´ í¬ê²Œ ë³€í•˜ì§€ëŠ” ì•Šì„ ê²ƒì´ë‹¤.

- ì½˜ì†”ë¡œ ìˆ«ìë¥¼ ì…ë ¥ë°›ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ (ConsoleInput)
- ì½˜ì†”ë¡œ ì¬ì‹œì‘ ì—¬ë¶€ë¥¼ ì…ë ¥ë°›ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤(ConsoleInput)
- ì½˜ì†”ì— ì •ë³´ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤(ConsoleOutput)
- 1~9ì‚¬ì´ì˜ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ëœë¤í•œ ìˆ˜ 3ê°œë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤(NumbersGenerativeStrategy)
- ìƒì„±ëœ ëœë¤ìˆ˜ì™€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìˆ˜ë¥¼ ë¹„êµí•˜ì—¬ ë³¼, ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ë¥¼ íŒë³„í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤(Referee)

<br />

## í”„ë¡œì íŠ¸ êµ¬ì„±

---

ì¼ë‹¨ ê°™ì´ íŒ¨í‚¤ì§€ êµ¬ì¡°ë¥¼ ì¡ì•˜ë‹¤

<br />

![image](https://user-images.githubusercontent.com/71188307/153355036-e7c27a6e-c771-40f5-bd82-75a9b5f47eb7.png)

<br />

ì˜ì¡´ì„± ì„¤ì •ì„ í•  ê²ƒì¸ë°, ìë°” 17ì„ ì‚¬ìš©í•  ê²ƒì´ë©°, ë¹Œë“œíˆ´ì€ `Gradle`ì„ ì‚¬ìš©í•œë‹¤.

í…ŒìŠ¤íŠ¸ë¥¼ ì›í™œí•˜ê²Œ í•˜ê¸° ìœ„í•´ `AssertJ`ì™€ `JUnit5`ë¥¼ ì¶”ê°€í–ˆë‹¤.

<br />

```groovy
// file: 'build.gradle'
plugins {
    id 'java'
}

group 'io.github.shirohoo'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.assertj:assertj-core:3.22.0'
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.8.2'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.2'
}

test {
    useJUnitPlatform()
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}
```

<br />

# ìˆ«ì ì•¼êµ¬ ê²Œì„ êµ¬í˜„

---

- [ğŸ“¦ ìˆ«ì ì•¼êµ¬ ê²Œì„ êµ¬í˜„ ì½”ë“œ ì €ì¥ì†Œ](https://github.com/shirohoo/code-kata/tree/main/base-ball)

<br />

ìš°ì„  ì´ ê²Œì„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê°ì²´ì¸ ìˆ«ìë¥¼ êµ¬í˜„í•´ì•¼ ê² ë‹¤.

ê²Œì„ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìˆ«ìë¥¼ í‘œí˜„ í•  í´ë˜ìŠ¤ ì´ë¦„ì€ `Numbers`ë¼ê³  ëª…ëª…í•˜ì˜€ê³ , êµ¬í˜„ì˜ ìœ ì—°í•¨ì„ ìœ„í•´ ì™¸ë¶€ì—ì„œ ìƒì„± ì „ëµì„ ì£¼ì…ë°›ì•„ ìƒì„±ë˜ë„ë¡ êµ¬ì„±í•  ê²ƒì´ë‹¤.

<br />

```java
class NumbersTests {
    @Test
    void from() {
        assertThatCode(() -> {
            Numbers randomNumbers = Numbers.from(() -> "123");
        }).doesNotThrowAnyException();
    }
}
```

<br />

ë¨¼ì € í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì •ì˜í•´ì£¼ê³  ìŠ¤í„°ë¹™ì„ í•œë‹¤.

<br />

```java
public interface NumbersGenerativeStrategy {}

public class RandomNumbersGenerativeStrategy implements NumbersGenerativeStrategy {}

public class Numbers {
    public static Numbers from(NumbersGenerativeStrategy randomStrategy) {
        return null;
    }
}
```

<br />

ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153357455-fc9850b7-faf7-49ef-adba-ab77710192cd.png)

<br />

í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•œë‹¤.

nullì´ ì…ë ¥ë˜ë©´ NPEê°€ ë°œìƒí•˜ëŠ”ì§€ ê²€ì¦í•˜ë„ë¡ í•œë‹¤.

<br />

```java
class NumbersTests {
    @Test
    void from() {
        assertThatCode(() -> {
            Numbers randomNumbers = Numbers.from(() -> "123");
        }).doesNotThrowAnyException();
    }

    @Test
    void createExceptionWhenInNull() {
        assertThatThrownBy(() -> {
            Numbers randomNumbers = Numbers.from(null);
        }).isInstanceOf(NullPointerException.class);
    }
}
```

<br />

```shell
Expecting code to raise a throwable.
	at io.github.shirohoo.baseball.app.domain.NumbersTests.createExceptionWhenInNull(NumbersTests.java:18)
```

<br />

í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ì˜€ë‹¤. 

êµ¬í˜„ì„ í•´ì•¼ í•˜ëŠ”ë°, ì¼ë‹¨ `Numbers`ëŠ” ì—¬ê¸°ì„œ ì† ë–¼ê³  `Numbers` ìƒì„±ì„ ì±…ì„ì§€ëŠ” `ì „ëµ`ìª½ìœ¼ë¡œ ì„ íšŒí•˜ëŠ”ê²Œ ì¡°ê¸ˆ ë” í¸í•  ê²ƒ ê°™ë‹¤.

`NumbersGenerativeStrategy`ëŠ” ìˆ«ìë¥¼ ìƒì„±í•˜ëŠ” ì „ëµì´ë‹¤.

`RandomNumbersGenerativeStrategy`ëŠ” 1~9ì‚¬ì´ì˜ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ìˆ«ì ì„¸ê°œë¥¼ ìƒì„±í•´ì•¼ë§Œ í•œë‹¤.

ê²€ì¦ì€ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?

1. ìš°ì„  ìƒì„±ëœ ì„¸ ìˆ«ìì˜ ì¤‘ë³µì„ ì œê±°í•˜ê³ ë„ ìˆ«ìì˜ ìˆ˜ê°€ 3ê°œì—¬ì•¼ í•  ê²ƒì´ë‹¤.
2. 1~9ì‚¬ì´ì˜ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ìˆ«ì 3ê°œê°€ ë‚˜ì˜¤ë¯€ë¡œ ìµœì†Œë¡œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ìˆ˜ëŠ” `123`ì´ë©°, ìµœëŒ€ë¡œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ìˆ˜ëŠ” `789`ì´ë‹¤. ë”°ë¼ì„œ ì„¸ ìˆ«ìì˜ í•© xëŠ” `6 <= x <= 24` ì—¬ì•¼ í•œë‹¤. 
3. 1,2ë²ˆ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œë„ ì¶©ë¶„íˆ ê²€ì¦ì€ ë  ê²ƒ ê°™ì§€ë§Œ, ì•„ë¬´ë˜ë„ ëœë¤ìˆ˜ì´ë‹¤ ë³´ë‹ˆ ì¡°ê¸ˆ ë” ì‹ ë¢°ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ë¥¼ 100ë²ˆ ë°˜ë³µí•´ì•¼ê² ë‹¤.

<br />

```java
class RandomNumbersGenerativeStrategyTests {
    @RepeatedTest(100)
    void generate() {
        RandomNumbersGenerativeStrategy strategy = new RandomNumbersGenerativeStrategy();
        String randomNumbers = strategy.generate();

        assertThat(distinctCount(randomNumbers)).isEqualTo(3L);
        assertThat(sum(randomNumbers)).isGreaterThanOrEqualTo(6).isLessThanOrEqualTo(24);
    }

    private long distinctCount(String randomNumbers) {
        return stream(randomNumbers.split(""))
            .distinct()
            .count();
    }

    private int sum(String randomNumbers) {
        return stream(randomNumbers.split(""))
            .mapToInt(Integer::valueOf)
            .sum();
    }
}
```

<br />

ìŠ¤í„°ë¹™ì„ í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ êµ¬í˜„ì€ ì•„ì˜ˆ ì—†ê¸° ë•Œë¬¸ì— ë‹¹ì—°íˆ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•œë‹¤.

ë°”ë¡œ êµ¬í˜„ì— ë“¤ì–´ê°„ë‹¤. 

ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ë§Œì¡±í•˜ë©´ `RandomNumbersGenerativeStrategy`ëŠ” ìœ íš¨í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

êµ¬í˜„ í•  ë•Œ ìë°” 17ì— í¬í•¨ë˜ì–´ ë¦´ë¦¬ì¦ˆëœ `ìƒˆë¡œìš´ ì˜ì‚¬ë‚œìˆ˜ ìƒì„±ê¸°(RandomGenerator)`ë¥¼ ì‚¬ìš©í•´ë´¤ë‹¤.

<br />

```java
public class RandomNumbersGenerativeStrategy implements NumbersGenerativeStrategy {
    private static final RandomGenerator RANDOM_GENERATOR = RandomGenerator.getDefault();

    public String generate() {
        return RANDOM_GENERATOR.ints(1, 10)
            .distinct()
            .limit(3)
            .mapToObj(String::valueOf)
            .collect(joining());
    }
}
```

<br />

ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153360611-1b2b3988-66ec-4080-9f09-d8055425b75e.png)

<br />

100ë²ˆì˜ ë°˜ë³µë™ì•ˆ ëª¨ë“  ì¼€ì´ìŠ¤ê°€ í•œë²ˆë„ ì‹¤íŒ¨í•˜ì§€ ì•Šì•˜ë‹¤.

ì´ì •ë„ë©´ ì¶©ë¶„íˆ ê²€ì¦ì´ ë˜ì—ˆë‹¤ê³  ë¯¿ì–´ë„ ë  ê²ƒ ê°™ë‹¤.

ì´ì œ `Numbers`ê°€ `NumbersGenerativeStrategy`ë¥¼ ë°›ì•„ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì„ êµ¬í˜„í• ê±´ë°, ì½”ë“œë¥¼ ë³´ë‹ˆ `Numbers`ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë¬¸ìì—´ì„ í¬í•¨í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.

ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í•  ë•Œ ì¤‘ìš”í•œ ê²ƒì€ í•­ìƒ `ë°ì´í„° -> í–‰ë™`ì´ ì•„ë‹Œ, `í–‰ë™ -> ë°ì´í„°` ìˆœìœ¼ë¡œ ìƒê°í•´ì•¼ë§Œ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ë°ì´í„° ì¤‘ì‹¬ì ì¸ ì‚¬ê³ ë¥¼ ë²„ë¦¬ê³  ì±…ì„,ì—­í• ê³¼ í–‰ë™ ì¤‘ì‹¬ì ì¸ ì‚¬ê³ ë¥¼ ê¸¸ëŸ¬ì•¼ í•œë‹¤ !

<br />

```java
public class Numbers {
    private final String numbers;

    private Numbers(String numbers) {
        this.numbers = numbers;
    }

    public static Numbers from(NumbersGenerativeStrategy strategy) {
        return new Numbers(strategy.generate());
    }
}
```

<br />

êµ¬í˜„í•˜ê³  ë‹¤ì‹œ `Numbers` í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í–ˆë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153361174-541ee0a7-6588-4685-8750-b756a5474985.png)

<br />

ì•„ì£¼ ì˜ ëœë‹¤.

ì´ì œë³´ë‹ˆ ë¦¬íŒ©í† ë§ í•  ê±´ë•ì§€ê°€ ë³´ì¸ë‹¤.

`Numbers`ë¥¼ `record` í´ë˜ìŠ¤ë¡œ ë³€ê²½í•´ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤. 

ë³€ê²½í•˜ê³  ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³´ì.

<br />

```java
public record Numbers(String numbers) {
    public static Numbers from(NumbersGenerativeStrategy strategy) {
        return new Numbers(strategy.generate());
    }
}
```

<br />

![image](https://user-images.githubusercontent.com/71188307/153361396-3295f4c4-2305-49c1-a6e7-f7c4baf7e70a.png)

<br />

ì‚¬ìš©ìê°€ 3ê°œì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì˜¬ ê²ƒì¸ë°, ì´ ìˆ«ìë„ 1~9ì‚¬ì´ì˜ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ëœë¤í•œ ìˆ˜ì¸ì§€ë¥¼ íŒë³„í•  ìˆ˜ ìˆê²Œ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í•˜ë‚˜ ì—´ì–´ë´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ìš°ì„  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•œë‹¤.

ì‚¬ìš©ì ì…ë ¥ì´ `null`, `empty`, `4ìë¦¬ ì´ìƒ`, `ì¤‘ë³µë˜ëŠ” ìˆ˜ í¬í•¨`, `0ì´ í¬í•¨ëœ ê²½ìš°` ì˜ˆì™¸ê°€ ë°œìƒë˜ë„ë¡ í•  ê²ƒì´ë‹¤.

<br />

```java
class NumbersTests {

    ...
    
    @ParameterizedTest
    @NullAndEmptySource
    @ValueSource(strings = {"012", "890", "111", "112", "1234", "1111"})
    void createExceptionWhenNot3NonOverlappingNumbersForUserInput(String userInput) {
        assertThatThrownBy(() -> {
            Numbers randomNumbers = Numbers.nonOverlapping3digits(userInput);
        }).isInstanceOf(IllegalArgumentException.class);
    }
}
```

<br />

ìƒˆë¡œ ì¶”ê°€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ëª¨ë“  ì¼€ì´ìŠ¤ê°€ ì‹¤íŒ¨í•œë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153363590-fb0107f7-c499-41b6-b5fc-0e57fd30541e.png)

<br />

êµ¬í˜„í•˜ì.

<br />

```java
public record Numbers(String numbers) {
    public static Numbers from(NumbersGenerativeStrategy strategy) {
        return new Numbers(strategy.generate());
    }

    public static Numbers nonOverlapping3digits(String userInput) {
        if (userInput == null || userInput.isBlank()) {
            throw new IllegalArgumentException("'userInput' must not be null or empty");
        }

        if (userInput.contains("0")) {
            throw new IllegalArgumentException("'userInput' must not be contain '0'");
        }

        long count = stream(userInput.split("")).distinct().count();
        if (count != 3) {
            throw new IllegalArgumentException("'userInput' must be three non-overlapping numbers");
        }

        int sum = stream(userInput.split("")).mapToInt(Integer::valueOf).sum();
        if (sum < 6 || sum > 24) {
            throw new IllegalArgumentException("sum of 'userInput' must be 6 <= x <= 24");
        }
        return new Numbers(userInput);
    }
}
```

<br />

ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë´¤ë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153363772-3340cc10-b306-4faa-b70d-f73cc2d214b3.png)

<br />

ì´ì œ ëœë¤í•˜ê²Œ ìƒì„±ëœ `Numbers`ì™€ ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°›ì•„ ìƒì„±ëœ `Numbers` ë¥¼ ë¹„êµí•˜ì—¬ ë³¼, ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ë¥¼ ë°˜í™˜í•´ì£¼ëŠ” `ì‹¬íŒ(Referee)` ê°ì²´ë¥¼ êµ¬í˜„ í•  ê²ƒì´ë‹¤.

ì‹¬íŒì€ ì˜¤ë¡œì§€ ë‘ê°œì˜ `ìˆ«ì(Numbers)`ë¥¼ ë¹„êµí•˜ì—¬ `íŒì •(decision)`í•˜ê³  `íŒì • ê²°ê³¼(DecisionResult)`ë¥¼ ë°˜í™˜ í•  ê²ƒì´ë‹¤.

ê·¸ë¦¬ê³  ì‹¬íŒì´ ë°˜í™˜í•œ íŒì • ê²°ê³¼ì—ëŠ” ë³¼, ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ê°€ í¬í•¨ë¼ìˆì„ ê²ƒì´ë‹¤.

í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„± í•  ë•Œ, ë³¼ê³¼ ìŠ¤íŠ¸ë¼ì´í¬ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ìµœëŒ€í•œ ê³ ë ¤í•´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì— ì¶”ê°€í–ˆë‹¤.

<br />

```java
class RefereeTests {
    @MethodSource
    @ParameterizedTest
    void decision(Numbers userNumbers, DecisionResult expected) {
        Referee referee = new Referee();
        Numbers computerNumbers = Numbers.nonOverlapping3digits("123");

        DecisionResult decisionResult = referee.decision(computerNumbers, userNumbers);

        assertThat(decisionResult).isEqualTo(expected);
    }

    static Stream<Arguments> decision() {
        return Stream.of(
            Arguments.of(Numbers.nonOverlapping3digits("123"), DecisionResult.of(0, 3)),
            Arguments.of(Numbers.nonOverlapping3digits("124"), DecisionResult.of(0, 2)),
            Arguments.of(Numbers.nonOverlapping3digits("145"), DecisionResult.of(0, 1)),
            Arguments.of(Numbers.nonOverlapping3digits("135"), DecisionResult.of(1, 1)),
            Arguments.of(Numbers.nonOverlapping3digits("132"), DecisionResult.of(2, 1)),
            Arguments.of(Numbers.nonOverlapping3digits("345"), DecisionResult.of(1, 0)),
            Arguments.of(Numbers.nonOverlapping3digits("234"), DecisionResult.of(2, 0)),
            Arguments.of(Numbers.nonOverlapping3digits("789"), DecisionResult.of(0, 0))
        );
    }
}
```

<br />

ìš°ì„  `DecisionResult`ë¥¼ `record` í´ë˜ìŠ¤ë¡œ í•˜ë‚˜ ìƒì„±í–ˆë‹¤.

<br />

```java
public record DecisionResult(int ballCount, int strikeCount) {
    public static DecisionResult of(int ballCount, int strikeCount) {
        return new DecisionResult(ballCount, strikeCount);
    }
}
```

<br />

ì´ì œ ì‹¬íŒì´ íŒì • í›„ `DecisionResult`ë¥¼ ë°˜í™˜í•  ê²ƒì¸ë°, ë‘ê°œì˜ `Numbers`ë¥¼ ë¹„êµí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤.

í•´ë³´ì.

<br />

```java
public class Referee {
    public DecisionResult decision(Numbers computerNumbers, Numbers userNumbers) {
        int ballCount = 0;
        int strikeCount = 0;
        for (int i = 0; i < computerNumbers.numbers().length(); i++) {
            ballCount += ifBallIncreaseByOne(i, computerNumbers, userNumbers);
            strikeCount += ifStrikeIncreaseByOne(i, computerNumbers, userNumbers);
        }
        return DecisionResult.of(ballCount, strikeCount);
    }

    private int ifBallIncreaseByOne(int i, Numbers computerNumbers, Numbers userNumbers) {
        if (computerNumbers.numbers().charAt(i) != userNumbers.numbers().charAt(i) &&
            userNumbers.numbers().contains(Character.toString(computerNumbers.numbers().charAt(i)))
        ) {
            return 1;
        }
        return 0;
    }

    private int ifStrikeIncreaseByOne(int i, Numbers computerNumbers, Numbers userNumbers) {
        if (computerNumbers.numbers().charAt(i) == userNumbers.numbers().charAt(i)) {
            return 1;
        }
        return 0;
    }
}
```

<br />

ì•Œê³ ë¦¬ì¦˜ì˜ ì‹œê°„ë³µì¡ë„ëŠ” O(N)ìœ¼ë¡œ ì© í›Œë¥­í•˜ì§„ ì•Šì§€ë§Œ, ë” ì¢‹ì€ ë°©ë²•ì´ ìƒê°ë‚˜ì§€ ì•Šì•„ ì¼ë‹¨ ì´ë ‡ê²Œ êµ¬í˜„í–ˆë‹¤.

ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ì.

<br />

![image](https://user-images.githubusercontent.com/71188307/153367169-4f3c08a8-24f2-43eb-9f62-c90838483307.png)

<br />

ì •ì˜í•œ ëª¨ë“  ì¼€ì´ìŠ¤ê°€ í†µê³¼ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.

ì´ì¯¤ì—ì„œ ë„ë©”ì¸ êµ¬í˜„ì€ ì–¼ì¶” ëì´ ë‚œ ê²ƒ ê°™ë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153367479-9d2f228b-a03f-4020-80d8-b97d27aec240.png)

<br />

ì´ì œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í•˜ë‚˜ êµ¬í˜„í• ê²ƒì¸ë°, ê²Œì„ì´ ì‹œì‘ë˜ë©´ 3ìŠ¤íŠ¸ë¼ì´í¬ê°€ ë  ë•Œê¹Œì§€ ì‚¬ìš©ìì˜ ì…ë ¥ì´ ë„ë©”ì¸ì— ê³„ì† ë“¤ì–´ì™€ì•¼ í•œë‹¤.

ì´ë¥¼ ìœ ì €ê°€ `ìˆ«ì ì•¼êµ¬ ê²Œì„(BaseBall)`ì„ í•œë²ˆ ì‹œë„í–ˆìŒìœ¼ë¡œ í‘œí˜„í•´ì•¼ê² ë‹¤.

ê²½í—˜ìƒ ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ” ì´ë¯¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ê²€ì¦ëœ ë„ë©”ì¸ ê°ì²´ë“¤ì„ ê°–ë‹¤ ì‚¬ìš©í•˜ë¯€ë¡œ ë°”ë¡œ êµ¬í˜„ì— ë“¤ì–´ê°€ë„ ë¬´ë°©í•˜ë‹¤.

ì´ë¯¸ í…ŒìŠ¤íŠ¸ ëœ ê²ƒì€ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ì§€ ë§ë¼ëŠ” ë§ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤. (`DRY ì›ì¹™`)  

ìœ ìŠ¤ì¼€ì´ìŠ¤ê°€ ìƒì„±ë  ë•Œ ì‹¬íŒê³¼ ì»´í“¨í„°ì˜ ëœë¤ìˆ˜ë¥¼ í¬í•¨í•˜ê³ , ì‚¬ìš©ì ì…ë ¥ì„ ë°›ì•„ ê³„ì† ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì‘ì„±í•´ë³´ì.

<br />

```java
public interface BaseBall {
    DecisionResult action(String input);
}
```

<br />

```java
public class BaseBallImpl implements BaseBall {
    private final Referee referee;
    private final Numbers computerNumbers;

    private BaseBallImpl(Referee referee, Numbers computerNumbers) {
        this.referee = referee;
        this.computerNumbers = computerNumbers;
    }

    public static BaseBall of(Referee referee, NumbersGenerativeStrategy strategy) {
        return new BaseBallImpl(referee, Numbers.create(strategy));
    }

    @Override
    public DecisionResult action(String input) {
        return referee.decision(computerNumbers, Numbers.nonOverlapping3digits(input));
    }
}
```

<br />

ì—¬ê¸°ê¹Œì§€ í•˜ê³  ë³´ë‹ˆ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì™¸ë¶€ì—ì„œ `String`ì„ ì§ì ‘ì ìœ¼ë¡œ ë°›ëŠ”ê²Œ ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë‹¤.

ì´ëŸ¬ë©´ ìœ ì €ê°€ ì…ë ¥í•˜ëŠ” ë°ì´í„°ì˜ íƒ€ì…ì„ ì™¸ë¶€ì— ì§ì ‘ì ìœ¼ë¡œ ë…¸ì¶œí•˜ê²Œ ë˜ì–´ ì™¸ë¶€ì—ì„œëŠ” í•­ìƒ `String`ìœ¼ë¡œë§Œ ì…ë ¥í•  ìˆ˜ ë°–ì— ì—†ê²Œ ëœë‹¤.

ëª¨ë“  êµ¬í˜„ì´ ì´ ì •ì˜ì— ì¢…ì†ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

<br />

ë”°ë¼ì„œ, ì´ë¥¼ `UserInput`ìœ¼ë¡œ ì¶”ìƒí™” í•˜ê³ , `Numbers.nonOverlapping3digits()`ì— ìˆë˜ ìœ íš¨ì„± ê²€ì‚¬ ì½”ë“œë¥¼ ëª¨ë‘ `UserInput`ìœ¼ë¡œ ì˜®ê²¨ì™€ì•¼ê² ë‹¤.

êµ‰ì¥íˆ ë§ì€ êµ¬ì¡° ë³€ê²½ì´ ì˜ˆìƒë˜ì§€ë§Œ, ê±±ì •í•  ê²ƒì€ ì—†ë‹¤.

ì—¬ì§€ê» ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ë³´í˜¸í•´ì¤„ ê²ƒì´ë‹¤.

ê³¼ê°í•˜ê²Œ êµ¬ì¡° ë³€ê²½ì— ë“¤ì–´ê°„ë‹¤.

ìš°ì„  ëª¨ë“  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì ì ˆí•˜ê²Œ ì˜®ê¸°ê³  ìˆ˜ì •í•´ì£¼ì—ˆë‹¤.

<br />

```java
class NumbersTests {
    @Test
    void from() {
        assertThatCode(() -> {
            Numbers randomNumbers = Numbers.from(() -> "123");
        }).doesNotThrowAnyException();
    }
}
```

<br />

```java
class RefereeTests {
    @MethodSource
    @ParameterizedTest
    void decision(UserInput userInput, DecisionResult expected) {
        Referee referee = new Referee();
        Numbers computerNumbers = Numbers.from("123");

        DecisionResult decisionResult = referee.decision(computerNumbers, userInput.createNumbers());

        assertThat(decisionResult).isEqualTo(expected);
    }

    static Stream<Arguments> decision() {
        return Stream.of(
            Arguments.of(UserInput.nonOverlapping3digits("123"), DecisionResult.of(0, 3)),
            Arguments.of(UserInput.nonOverlapping3digits("124"), DecisionResult.of(0, 2)),
            Arguments.of(UserInput.nonOverlapping3digits("145"), DecisionResult.of(0, 1)),
            Arguments.of(UserInput.nonOverlapping3digits("135"), DecisionResult.of(1, 1)),
            Arguments.of(UserInput.nonOverlapping3digits("132"), DecisionResult.of(2, 1)),
            Arguments.of(UserInput.nonOverlapping3digits("345"), DecisionResult.of(1, 0)),
            Arguments.of(UserInput.nonOverlapping3digits("234"), DecisionResult.of(2, 0)),
            Arguments.of(UserInput.nonOverlapping3digits("789"), DecisionResult.of(0, 0))
        );
    }
}
```

<br />

ê·¸ë¦¬ê³  `UserInputTests` ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ `Numbers`ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì—¬ê¸°ë¡œ ì˜®ê²¼ë‹¤.

<br />

```java
class UserInputTests {
    @ParameterizedTest
    @NullAndEmptySource
    @ValueSource(strings = {"012", "890", "111", "112", "1234", "1111"})
    void createExceptionWhenNot3NonOverlappingNumbersForUserInput(String userInput) {
        assertThatThrownBy(() -> {
            UserInput userNumbers = UserInput.nonOverlapping3digits(userInput);
        }).isInstanceOf(IllegalArgumentException.class);
    }

    @Test
    void createNumbers() {
        UserInput userInput = UserInput.nonOverlapping3digits("123");
        assertThat(userInput.createNumbers()).isEqualTo(Numbers.from("123"));
    }
}
```

<br />

ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í†µê³¼í•  ìˆ˜ ìˆê²Œ `Numbers`ì™€ `UserInput`ê°„ì˜ ì±…ì„ì„ ì¬ë¶„ë°°í•´ì¤€ë‹¤.

<br />

```java
public record Numbers(String numbers) {
    public static Numbers from(NumbersGenerativeStrategy strategy) {
      return new Numbers(strategy.generate());
    }

    public static Numbers from(String input) {
      return new Numbers(input);
    }
}
```

<br />

```java
public class UserInput {
    private final String userInput;

    private UserInput(String input) {
        if (input == null || input.isBlank()) {
            throw new IllegalArgumentException("'userInput' must not be null or empty");
        }

        if (input.contains("0")) {
            throw new IllegalArgumentException("'userInput' must not be contain '0'");
        }

        long count = stream(input.split("")).distinct().count();
        if (count != 3) {
            throw new IllegalArgumentException("'userInput' must be three non-overlapping numbers");
        }

        int sum = stream(input.split("")).mapToInt(Integer::valueOf).sum();
        if (sum < 6 || sum > 24) {
            throw new IllegalArgumentException("sum of 'userInput' must be 6 <= x <= 24");
        }
        this.userInput = input;
    }

    public static UserInput nonOverlapping3digits(String input) {
        return new UserInput(input);
    }

    public Numbers createNumbers(){
        return Numbers.from(userInput);
    }
}
```

<br />

ë³€ê²½ëœ ì½”ë“œì— ë§ì¶° `BaseBallImpl`ë„ ìˆ˜ì •í•´ì£¼ì.

<br />

```java
public class BaseBallImpl implements BaseBall {
    private final Referee referee;
    private final Numbers computerNumbers;

    private BaseBallImpl(Referee referee, Numbers computerNumbers) {
        this.referee = referee;
        this.computerNumbers = computerNumbers;
    }

    public static BaseBall of(Referee referee, NumbersGenerativeStrategy strategy) {
        return new BaseBallImpl(referee, Numbers.from(strategy));
    }

    @Override
    public DecisionResult action(UserInput input) {
        return referee.decision(computerNumbers, input.createNumbers());
    }
}

```

<br />

ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´...

<br />

![image](https://user-images.githubusercontent.com/71188307/153371691-761e0aee-f404-483f-a6bd-db92e0ba0985.png)

<br />

![image](https://user-images.githubusercontent.com/71188307/153371736-efdd02a3-ff70-4f34-910c-6ead20d88384.png)

<br />

ì—¬ê¸°ê¹Œì§€ì˜ íŒ¨í‚¤ì§€ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153371833-5fd0da46-bdd0-4b1a-8630-44761269e425.png)

<br />

ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ `ì½˜ì†” ì…ë ¥`ê³¼ `ì½˜ì†” ì¶œë ¥`ì„ êµ¬í˜„í•˜ê³ , `ì½˜ì†” ì• í”Œë¦¬ì¼€ì´ì…˜`ì„ êµ¬í˜„ í•  ì°¨ë¡€ë‹¤.

ì´ë¶€ë¶„ì€ ìš”êµ¬ì‚¬í•­ì— ì˜ê±°í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ êµ¬í˜„ì— ì§‘ì¤‘í•˜ë„ë¡ í•˜ì.

ì‚¬ì‹¤ êµ³ì´ ìš”êµ¬ì‚¬í•­ì´ ì•„ë‹ˆë”ë¼ë„ ì™¸ë¶€ì˜ ì…ë ¥ì€ ë„ë©”ì¸ì—ì„œ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ë‹¤ê³  ìƒê°í•œë‹¤.

ë‹¨ì§€ ë„ë©”ì¸ ìŠ¤ìŠ¤ë¡œ ìœ íš¨ì„± ê²€ì‚¬ë§Œ ì˜ í•˜ë©´ ë  ë¿ì´ë‹¤.

<br />

```java
public class ConsoleInput {
    private final Scanner scanner;

    public ConsoleInput() {
        this.scanner = new Scanner(System.in);
    }

    public UserInput trys() {
        return UserInput.nonOverlapping3digits(scanner.nextLine());
    }

    public boolean restartIntentions() {
        int intentions = scanner.nextInt();
        if (intentions == 1) {
            return true;
        }
        if (intentions == 2) {
            return false;
        }
        throw new IllegalArgumentException(String.format("'%s' is unknown.", intentions));
    }
}
```

<br />

```java
public class ConsoleOutput {
    private static final String ENTER_NUMBER_MESSAGE = "ìˆ«ìë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : ";
    private static final String BALL_MESSAGE = "ë³¼";
    private static final String STRIKE_MESSAGE = "ìŠ¤íŠ¸ë¼ì´í¬";
    private static final String NOTHING_MESSAGE = "ë‚«ì‹±";
    private static final String COMPLETE_MESSAGE = "3ê°œì˜ ìˆ«ìë¥¼ ëª¨ë‘ ë§íˆì…¨ìŠµë‹ˆë‹¤! ê²Œì„ ì¢…ë£Œ";
    private static final String RESTART_MESSAGE = "ê²Œì„ì„ ìƒˆë¡œ ì‹œì‘í•˜ë ¤ë©´ 1, ì¢…ë£Œí•˜ë ¤ë©´ 2ë¥¼ ì…ë ¥í•˜ì„¸ìš”.";

    public void enterNumberMessage() {
        print(ENTER_NUMBER_MESSAGE);
    }

    public void resultMessage(DecisionResult result) {
        if (result.ballCount() == 0 && result.strikeCount() == 0) {
            println(NOTHING_MESSAGE);
        }
        if (result.ballCount() > 0 && result.strikeCount() == 0) {
            println(result.ballCount() + BALL_MESSAGE);
        }
        if (result.ballCount() == 0 && result.strikeCount() > 0) {
            println(result.strikeCount() + STRIKE_MESSAGE);
        }
        if (result.ballCount() > 0 && result.strikeCount() > 0) {
            println(String.format("%s%s %s%s",
                result.ballCount(), BALL_MESSAGE,
                result.strikeCount(), STRIKE_MESSAGE
            ));
        }
        if (result.strikeCount() == 3) {
            println(COMPLETE_MESSAGE);
        }
    }

    public void restartMessage() {
        println(RESTART_MESSAGE);
    }

    private void print(String message) {
        System.out.print(message);
    }

    private void println(String message) {
        System.out.println(message);
    }
}
```

<br />

```java
public class ConsoleBaseBallApp {
    public static void main(String[] args) {
        Runner.init().run();
    }

    private static class Runner {
        private static Runner init() {
            return new Runner();
        }

        private void run() {
            ConsoleInput input = new ConsoleInput();
            ConsoleOutput output = new ConsoleOutput();
            BaseBall game = BaseBallImpl.of(new Referee(), new RandomNumbersGenerativeStrategy());

            DecisionResult result;
            do {
                output.enterNumberMessage();
                result = game.action(input.trys());
                output.resultMessage(result);
            } while (result.strikeCount() != 3);

            output.restartMessage();
            if (input.restartIntentions()) {
                run();
            }
            System.exit(0);
        }
    }
}
```

<br />

ìŠ¤íŠ¸ë¼ì´í¬ë¥¼ íŒë³„í•˜ëŠ” ì½”ë“œê°€ ë³„ë¡œ ë§ˆìŒì— ì•ˆë“ ë‹¤.

ë‚´ë¶€ì˜ êµ¬í˜„ì„ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.

`DecisionResult`ì˜ ìŠ¤íŠ¸ë¼ì´í¬ ì¹´ìš´íŠ¸ê°€ 3ì´ë©´ ìŠ¤íŠ¸ë¼ì´í¬ ì•„ì›ƒì¸ì§€ ìŠ¤ìŠ¤ë¡œ íŒë³„í•˜ë„ë¡ ìœ„ì„í•´ì•¼ê² ë‹¤.

í•­ìƒ ê·¸ë¬ë“¯ì´ ìš°ì„  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ í•˜ë‚˜ ì‘ì„±í•œë‹¤.

<br />

```java
class DecisionResultTests {
    @Test
    void isStrikeOut() {
        DecisionResult result = DecisionResult.of(0, 3);
        assertThat(result.isStrikeOut()).isTrue();
    }
}
```

<br />

```java
public record DecisionResult(int ballCount, int strikeCount) {
    public static DecisionResult of(int ballCount, int strikeCount) {
        return new DecisionResult(ballCount, strikeCount);
    }

    public boolean isStrikeOut() {
        return strikeCount == 3;
    }
}
```

<br />

```java
public class ConsoleBaseBallApp {
    public static void main(String[] args) {
        Runner.init().run();
    }

    private static class Runner {
        private static Runner init() {
            return new Runner();
        }

        private void run() {
            ConsoleInput input = new ConsoleInput();
            ConsoleOutput output = new ConsoleOutput();
            BaseBall game = BaseBall.create(new Referee(), new RandomNumbersGenerativeStrategy());

            DecisionResult result;
            do {
                output.enterNumberMessage();
                result = game.action(input.trys());
                output.resultMessage(result);
            } while (!result.isStrikeOut());

            output.restartMessage();
            if (input.restartIntentions()) {
                run();
            }
            System.exit(0);
        }
    }
}
```

<br />

ì—¬ê¸°ê¹Œì§€ ì „ì²´ì ì¸ íŒ¨í‚¤ì§€ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<br />

![image](https://user-images.githubusercontent.com/71188307/153380187-ac9c2860-bdfb-4969-9e1e-d78c6f368676.png)

<br />

ì´ì œ ê²Œì„ì„ ì‹¤í–‰í•´ë³´ì.

<br />

![image](https://user-images.githubusercontent.com/71188307/153373358-acf81380-d2bd-4ba2-a056-69c8f19bd762.png)

<br />

ì˜ ëœë‹¤.

<br />
