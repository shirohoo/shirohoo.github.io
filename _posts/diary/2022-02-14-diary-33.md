---
layout: post
category:
  - diary
title: 코드 카타 - 문자열 계산기
description: |
  TDD와 헥사고날 아키텍처 훈련
image: /assets/img/debugging/debugging.jpg
accent_image:
  background: url('/assets/img/debugging/debugging.jpg') center/cover
related_posts:
  - _posts/diary/2022-02-09-diary-32.md
published: true
---

* toc
{:toc}
  
<br />

# 코드카타(Code Kata)

- [📜 CodeKata - Because experience is the only teacher](http://codekata.com/)

---

(주의... 의역이 심합니다 😅)

어떻게 하면 훌륭한 음악가가 될 수 있을까요?

우선, 일단 이론을 알면 악기의 역학을 이해하는데 분명 도움이 됩니다.

하지만 궁극적으로 훌륭한 실력은 이렇게 이론만 알아서 되는것이 아닌, 지속적이고 반복적인 훈련에서 나온다는 것을 깨달아야 합니다.

반복적인 훈련에 이론을 계속 적용하며 결과를 얻고, 결과에 대한 피드백도 얻는다면 결과는 계속해서 좋아질 것입니다.

<br />

위대한 스포츠 선수가 되려면 어떻게 해야 할까요?

체력과 같은 선천적인 재능들은 분명히 큰 도움이 됩니다.

그러나 이러한 재능들과 별개로 모든 위대한 스포츠 선수들은 보이지 않는 곳에서 매일 긴 시간 동안의 피나는 훈련을 했음을 알아야 합니다.

<br />

일반적으로 소프트웨어 산업현장에서 우리는 이론만 훈련받은 개발자들을 데려와 프로젝트에 투입시키고, 프로젝트가 잘 돌아가길 원합니다.

이것은 건강한 아이들을 몇 모으면 워싱턴 커맨더스를 이길 수 있다고 말하는 것과 다르지 않습니다.

<br />

즉, 우리는 직장에서 훈련을 하기 때문에 실수를 하는 것입니다.

따라서, 우리는 일과 훈련을 분리하는 방법을 찾고 지속적으로 훈련해 성장해야만 합니다.

<br />

## 코드 카타, 어떻게 해야 하는가?

---

- 누구에게도 방해받지 않는 시간이 필요하며, 가볍게 시도해보고 싶은 단순한 주제가 필요합니다.

- 필요하거나 만족스러울 만큼 여러 번 쉽게 시도하고, 무엇보다 실수를 하는 것이 두렵지 않고 편안해야만 합니다.

- 개선을 위해 노력할 수 있도록 매번 피드백을 찾아야 합니다.

- 외부의 압력이 없어야 합니다. 심신이 편안해야 합니다. 그리하여 오로지 훈련에만 몰입 할 수 있어야 합니다.

<br />

이것이 프로젝트 환경에서 성장하기 어렵고, 실수가 잦아지는 이유입니다.

<br />

카타는 한 형태를 여러 번 반복하면서 조금씩 개선되는 가라데의 훈련입니다.

코드 카타의 의도는 가라데의 카타와 비슷합니다.

둘 모두 단순히 짧은 반복 훈련입니다.

<br />

카타를 처음 하면 지루할수도 있지만, 계속해서 반복 할 수록 코드가 점점 더 좋아지는 것을 보고 느끼게 될 것이기 때문에 하면 할 수록 이 훈련이 아주 좋다는 것을 스스로 인식하게 될 것입니다.

결과적으로, 스스로가 성장한다는 것을 직접적으로 느낄 수 있기 때문에 카타는 개발에 재미를 느끼는 데에도 큰 도움이 됩니다.

<br />

누군가는 카타를 하며 단순히 코딩하는 것을 떠나 설계까지 고려 할 겁니다.

또 누군가는 카타를 진행하며 프로그래밍 이면의 문제에 대한 고민을 할 겁니다.

즉, 카타에는 정답이 없습니다.

<br />

원하는 훈련을 하고 원하는 공예에 충분한 시간을 투자하세요.

카타의 요점은 정답이 없다는 것이며, 설령 정답이 있다고 하더라도 그 정답이 중요하지 않을 것이라는 점입니다.

중요한 것은 결과가 아닌 카타를 진행하며 고민하는 과정 그 자체입니다.

<br />

# 소프트웨어 개발 3대 원칙

---

나는 최대한 소프트웨어 개발 3대 원칙과 객체지향 5대 원칙(SOLID)을 고민하면서 훈련에 임할 것이다.

- KISS(Keep It Simple Stupid): 최대한 단순하게 해라
- YAGNI(You Ain't Gonna Need It): 필요한 것만 해라
- DRY(Do not Repeat Yourself): 같은 것을 반복하지 마라 

# 문자열 계산기

![Java_17](https://img.shields.io/badge/java-17-red?logo=java)

---

- [📖 NextStep - 문자열 계산기](http://www.yes24.com/Product/Goods/31869154)

<br />

## 요구사항

---

- 사용자가 입력한 문자열 값에 따라 사칙연산을 수행할 수 있는 계산기를 구현해야 한다.
- 문자열 계산기는 사칙연산의 계산 우선순위가 아닌 입력 값에 따라 계산 순서가 결정된다. 즉, 수학에서는 곱셈, 나눗셈이 덧셈, 뺄셈 보다 먼저 계산해야 하지만 이를 무시한다.
- 예를 들어 `2 + 3 * 4 / 2`와 같은 문자열을 입력할 경우 2 + 3 * 4 / 2 실행 결과인 10을 출력해야 한다.

<br />

## 프로그래밍 요구사항

- 모든 로직을 TDD로 구현한다. 단, UI(System.out, System.in) 로직은 제외
- 자바 코드 컨벤션을 지키면서 프로그래밍한다.
  - 기본적으로 Google Java Style Guide을 원칙으로 한다.
  - 단, 들여쓰기는 '2 spaces'가 아닌 '4 spaces'로 한다.
- indent(인덴트, 들여쓰기) depth를 2가 넘지 않도록 구현한다. 1까지만 허용한다.
  - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
- else 예약어를 쓰지 않는다.
- 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분한다.
- 3항 연산자를 쓰지 않는다.
- 함수(또는 메소드)가 한 가지 일만 하도록 최대한 작게 만들어라.

<br />

## 기능 정의 및 책임 할당

우선 꼭 필요하다고 생각되는 기능들을 정의해야한다.

구현 중간에 세세하게 바뀔수는 있겠지만 거시적으로 보면 크게 변하지는 않을 것이다.

- 콘솔로 숫자를 입력받을 수 있어야 한다 (ConsoleInput)
- 콘솔로 재시작 여부를 입력받을 수 있어야 한다(ConsoleInput)
- 콘솔에 정보를 출력할 수 있어야 한다(ConsoleOutput)
- 1~9사이의 중복되지 않는 랜덤한 수 3개를 생성할 수 있어야 한다(NumbersGenerativeStrategy)
- 생성된 랜덤수와 사용자가 입력한 수를 비교하여 볼, 스트라이크 카운트를 판별할 수 있어야 한다(Referee)

<br />

## 프로젝트 구성

---

일단 다음과 같이 패키지 구조를 잡았다

<br />

![image](https://user-images.githubusercontent.com/71188307/153355036-e7c27a6e-c771-40f5-bd82-75a9b5f47eb7.png)

<br />

의존성 설정을 할 것인데, 자바 17을 사용할 것이며, 빌드툴은 `Gradle`을 사용한다.

테스트를 원활하게 하기 위해 `AssertJ`와 `JUnit5`를 추가했다.

<br />

```groovy
// file: 'build.gradle'
plugins {
    id 'java'
}

group 'io.github.shirohoo'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.assertj:assertj-core:3.22.0'
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.8.2'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.2'
}

test {
    useJUnitPlatform()
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}
```

<br />

# 문자열 계산기 구현

---

- [📦 문자열 계산기 구현 코드 저장소](https://github.com/shirohoo/code-kata/tree/main/string-calculator)

<br />

