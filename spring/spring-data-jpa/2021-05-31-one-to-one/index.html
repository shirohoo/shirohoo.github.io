<!DOCTYPE html>
<html lang="ko"><head><title>OneToOne에 대해서 | 돈 받고 일하면 프로</title><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="OneToOne에 대해서" /><meta name="author" content="shirohoo" /><meta property="og:locale" content="ko_KR, en_US" /><meta name="description" content="JPA 사용 시 만악의 근원, @OneToOne에 대한 고찰" /><meta property="og:description" content="JPA 사용 시 만악의 근원, @OneToOne에 대한 고찰" /><meta property="og:site_name" content="돈 받고 일하면 프로" /><meta property="og:image" content="/assets/img/spring/spring-data-jpa/hibernate.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-31T13:55:00+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="/assets/img/spring/spring-data-jpa/hibernate.jpg" /><meta property="twitter:title" content="OneToOne에 대해서" /><meta name="google-site-verification" content="google-site-verification=QP6xbvFbQ-RK1rEeDlge0lpDYvcCG0FdC5crTSd-aDs" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"shirohoo"},"description":"JPA 사용 시 만악의 근원, @OneToOne에 대한 고찰","url":"/spring/spring-data-jpa/2021-05-31-one-to-one/","@type":"BlogPosting","image":"/assets/img/spring/spring-data-jpa/hibernate.jpg","headline":"OneToOne에 대해서","dateModified":"2024-03-24T17:42:01+00:00","datePublished":"2021-05-31T13:55:00+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/img/me.gif"},"name":"shirohoo"},"mainEntityOfPage":{"@type":"WebPage","@id":"/spring/spring-data-jpa/2021-05-31-one-to-one/"},"@context":"https://schema.org"}</script><meta name="keywords" content="java,kotlin,python,spring,backend"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="돈 받고 일하면 프로"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="돈 받고 일하면 프로"><meta name="theme-color" content="rgb(8,46,57)"><meta name="generator" content="Hydejack v9.1.5" /><link rel="alternate" href="/spring/spring-data-jpa/2021-05-31-one-to-one/" hreflang="ko-kr, en-us"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="돈 받고 일하면 프로" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"><link rel="dns-prefetch" href="/assets/js/search-worker-9.1.5.js" as="worker" id="_hrefSearch"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_katexPreload"> <noscript><link rel="stylesheet" href="/assets/bower_components/katex/dist/katex.min.css"></noscript> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._advertise = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2024-03-24T17:42:53+00:00', }; w._clapButton = false; }(window);</script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}#_dark-mode{font-size:1.25rem}@media screen{body.light-mode{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body.light-mode .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}body.dark-mode{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body.dark-mode .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body.dark-mode p>code,body.dark-mode li>code,body.dark-mode table code{background-color:white;color:black;border-radius:5px;font-weight:bold}}@media screen and (prefers-color-scheme: dark){body{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body p>code,body li>code,body table code{background-color:white;color:black;border-radius:5px;font-weight:bold}.tippy-content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}}html{--font-family: Architects Daughter;--font-family-heading: Architects Daughter;--code-font-family: ui-monospace,Menlo,Monaco,Ligamonacop,Cascadia Mono,Segoe UI Mono,Roboto Mono,Oxygen Mono,Ubuntu Monospace,Source Code Pro,Fira Mono,Droid Sans Mono,Courier New,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg);--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:3rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,#markdown-toc[title]:before,.note[title]:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.sidebar a{text-shadow:rgba(0,0,0,0.25) 0.1rem 0.1rem 0.15rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"} .clearfix,main:not(.layout-resume) .columns::after{content:"";display:table;clear:both}.color-transition,main:not(.layout-resume) .project-card{transition:none}main:not(.layout-resume) .columns{margin-left:-1rem;display:flex;flex-wrap:wrap;contain:content;padding-top:1rem;margin-top:1rem;padding-right:1rem;margin-right:-1rem}main:not(.layout-resume) .column{float:left;padding-left:1rem;margin-bottom:2rem;width:100%;display:flex}@media screen and (min-width: 42em){main:not(.layout-resume) .columns{margin-left:-2rem;margin-right:-2rem}main:not(.layout-resume) .column-1-2{width:50%}}@media screen and (min-width: 1664px){main:not(.layout-resume) .columns-break{width:calc(50vw + 25rem)}main:not(.layout-resume) .columns-break>.column-1-2,main:not(.layout-resume) .columns-break>.column-1{width:27.5rem}}@media print{main:not(.layout-resume) .columns{display:block}main:not(.layout-resume) .column{display:block;width:50%}}main:not(.layout-resume) .project-card{width:100%;color:var(--gray-text);background-color:var(--gray-bg);padding-bottom:1rem;position:relative;overflow:hidden;box-shadow:0.125rem 0.125rem 1rem rgba(0,0,0,0.2);contain:content;border-radius:.5rem;page-break-inside:avoid;transition:transform 500ms ease;will-change:transform}main:not(.layout-resume) .project-card:hover{transform:translateY(-0.25rem);transition:transform 250ms ease}main:not(.layout-resume) .project-card>a.flip-project{display:block}main:not(.layout-resume) .project-card>a.flip-project .project-card-img{margin-bottom:0}main:not(.layout-resume) .project-card>a.flip-project .project-card-img img{display:block;border-top-left-radius:.5rem;border-top-right-radius:.5rem}main:not(.layout-resume) .project-card a{position:relative;z-index:1}main:not(.layout-resume) .project-card a.fill-card{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}main:not(.layout-resume) .project-card>.project-card-title,main:not(.layout-resume) .project-card>.project-card-text{text-align:center;padding:0 1rem}main:not(.layout-resume) .project-card>.project-card-title{display:block;font-size:1.08rem;margin-top:.75rem;margin-bottom:.25rem;color:inherit}main:not(.layout-resume) .project-card>.project-card-text{margin:.25rem 0}main:not(.layout-resume) .column-1>.project-card>.project-card-title{font-size:1.2rem}main:not(.layout-resume) .column-1>.project-card>.project-card-text{font-size:1rem}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.1.5.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Architects%20Daughter&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.1.5.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Architects%20Daughter&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-highlight: rgba(79,177,186,0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57);--dark-mode-body-bg: #282f31;--dark-mode-border-color: #343c3f}</style><!--<![endif]--> <!-- robots --><meta name="NaverBot" content="All"/><meta name="NaverBot" content="index,follow"/><meta name="Yeti" content="All"/><meta name="Yeti" content="index,follow"/><meta name="naver-site-verification" content="82d4d6173147a0aba3bdf3afb612c7188e832cf1" /><meta name="google-site-verification" content="qGe3nTw8iiwhc_9vqrjuB8uB0AiMCGPzG8WNTHHC13I" /> <!-- Google AdSense --> <script data-ad-client="ca-pub-9270648935360607" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- favicons --><link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"> <!-- Code used for embedding Gumroad on the Hydejack Site. Left here for reference, feel free to delete. --><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <script src="/assets/js/sidebar-folder.js"></script><link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"> <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> <script src="/assets/js/swiper-control.js"></script> <script src="/assets/js/collapsible.js"></script> <script src="/assets/js/mouse-buble.js"></script><link rel="dns-prefetch" href="https://assets.gumroad.com"> <script type="module"> document.querySelector('hy-push-state').addEventListener('load', () => { let tocElement = document.getElementById("markdown-toc"); if(tocElement){ let affixedDiv = document.createElement("div"); affixedDiv.style.position = "relative"; affixedDiv.style.top = "-1rem"; tocElement.parentNode.insertBefore(affixedDiv, tocElement); let headerList = document.getElementsByClassName("permalink"); if(headerList){ let prevElement; window.addEventListener("scroll", () => { let hurdleTop = affixedDiv.getBoundingClientRect().top; if(hurdleTop <= 0) tocElement.classList.add("affix"); else tocElement.classList.remove("affix"); for(let i=0;i<headerList.length;i++){ if(headerList[i].getBoundingClientRect().top >= 0){ prevElement?.style.removeProperty("font-weight"); let tocId = "markdown-toc-" + headerList[i].parentNode.id; prevElement = document.getElementById(tocId); prevElement.style.fontWeight = "bold";; break; } } }); } } }); </script> <script type="module"> let p; const promisify = f => x => new Promise(r => f(x).addEventListener('load', r)); const loadJS = promisify(window.loadJS); document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad-embed.js'); await p; if (!window.GumroadEmbed) { await new Promise(function check1(res) { if ('createGumroadEmbed' in window) res(window.createGumroadEmbed()); else setTimeout(() => check1(res), 200); }); } await new Promise(function check2(res) { if ('GumroadEmbed' in window) res(GumroadEmbed.reload()); else setTimeout(() => check2(res), 200); }); } }, { rootMargin: '1440px' }); document.querySelectorAll('.gumroad-product-embed').forEach(el => io.observe(el)); }); </script> <script type="module"> let p; const promisify = f => x => new Promise(r => f(x).addEventListener('load', r)); const loadJS = promisify(window.loadJS); document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad.js'); await p; if (!window.GumroadOverlay) { await new Promise(function check(res) { if ('createGumroadOverlay' in window) res(window.createGumroadOverlay()); else setTimeout(() => check(res), 200); }); } } }, { rootMargin: '300px' }); document.querySelectorAll('.gumroad-button').forEach(el => io.observe(el)); }); </script><body class="no-break-layout"> <script> window._sunrise = 6; window._sunset = 18; !function(e,s){var d="light-mode",o="dark-mode",a=(new Date).getHours();"matchMedia"in e&&e.matchMedia("(prefers-color-scheme)")||(o=(e=a<=e._sunrise||a>=e._sunset?o:d)==o?d:o,s.body.classList.add(e),s.body.classList.remove(o))}(window,document); </script> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/">home</a><li> <span>/</span> <a href="/spring/">spring</a><li> <span>/</span> <a href="/spring/spring-data-jpa/">spring-data-jpa</a><li> <span>/</span> <span>2021-05-31-one-to-one</span></ul></nav><script async src="https://www.googletagmanager.com/gtag/js?id=G-NKVY3834TW"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NKVY3834TW'); </script><article id="post-spring-spring-data-jpa-one-to-one" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> OneToOne에 대해서</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2021-05-31T13:55:00+00:00">31 May 2021</time> &nbsp;in&nbsp;<a href="/spring/" class="flip-title"><u>Spring</u></a> / <span>Spring-data-jpa</span> </span></div><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="/assets/img/spring/spring-data-jpa/hibernate.jpg" alt="OneToOne에 대해서" width="864" height="486" loading="lazy" /></div><p class="note-sm" > JPA 사용 시 만악의 근원, <code class="language-plaintext highlighter-rouge">@OneToOne</code>에 대한 고찰</header><p> <p>JPA를 사용하면서 <code class="language-plaintext highlighter-rouge">@OneToOne</code>에 대해 느낀바로는 만악의 근원에 가깝다는 것이다.<p>여타 매핑과 차별되는 점은 <strong><em>(@ManyToOne, @ManyToMany, @OneToMany)</em></strong><p>이 녀석은 기본적으로 <code class="language-plaintext highlighter-rouge">EAGER</code>로 동작한다는 것이다.<p><code class="language-plaintext highlighter-rouge">@ManyToOne</code>도 기본적으로 <code class="language-plaintext highlighter-rouge">EAGER</code>로 동작하기는 하는데 내부적인 동작에 큰 차이가 있다.<p>아래는 <code class="language-plaintext highlighter-rouge">@OneToOne</code>의 전체적인 명세이다.<p> <blockquote><p>Specifies a single-valued association to another entity that has one-to-one multiplicity. It is not normally necessary to specify the associated target entity explicitly since it can usually be inferred from the type of the object being referenced. If the relationship is bidirectional, the non-owning side must use the mappedBy element of the OneToOne annotation to specify the relationship field or property of the owning side. The OneToOne annotation may be used within an embeddable class to specify a relationship from the embeddable class to an entity class. If the relationship is bidirectional and the entity containing the embeddable class is on the owning side of the relationship, the non-owning side must use the mappedBy element of the OneToOne annotation to specify the relationship field or property of the embeddable class. The dot (“.”) notation syntax must be used in the mappedBy element to indicate the relationship attribute within the embedded attribute. The value of each identifier used with the dot notation is the name of the respective embedded field or property.</blockquote><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Example</span> <span class="mi">1</span><span class="o">:</span> <span class="nc">One</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">one</span> <span class="n">association</span> <span class="n">that</span> <span class="n">maps</span> <span class="n">a</span> <span class="n">foreign</span> <span class="n">key</span> <span class="n">column</span>
  
      <span class="c1">// On Customer class:</span>
  
      <span class="nd">@OneToOne</span><span class="o">(</span><span class="n">optional</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
      <span class="nd">@JoinColumn</span><span class="o">(</span>
      	<span class="n">name</span><span class="o">=</span><span class="s">"CUSTRECID"</span><span class="o">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">CustomerRecord</span> <span class="nf">getCustomerRecord</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">customerRecord</span><span class="o">;</span> <span class="o">}</span>
  
      <span class="c1">// On CustomerRecord class:</span>
  
      <span class="nd">@OneToOne</span><span class="o">(</span><span class="n">optional</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">mappedBy</span><span class="o">=</span><span class="s">"customerRecord"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">Customer</span> <span class="nf">getCustomer</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">customer</span><span class="o">;</span> <span class="o">}</span>
  
  
      <span class="nc">Example</span> <span class="mi">2</span><span class="o">:</span> <span class="nc">One</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">one</span> <span class="n">association</span> <span class="n">that</span> <span class="n">assumes</span> <span class="n">both</span> <span class="n">the</span> <span class="n">source</span> <span class="n">and</span> <span class="n">target</span> <span class="n">share</span> <span class="n">the</span> <span class="n">same</span> <span class="n">primary</span> <span class="n">key</span> <span class="n">values</span><span class="o">.</span> 
  
      <span class="c1">// On Employee class:</span>
  
      <span class="nd">@Entity</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
      	<span class="nd">@Id</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
      
      	<span class="nd">@OneToOne</span> <span class="nd">@MapsId</span>
      	<span class="nc">EmployeeInfo</span> <span class="n">info</span><span class="o">;</span>
      	<span class="o">...</span>
      <span class="o">}</span>
  
      <span class="c1">// On EmployeeInfo class:</span>
  
      <span class="nd">@Entity</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeInfo</span> <span class="o">{</span>
      	<span class="nd">@Id</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
      	<span class="o">...</span>
      <span class="o">}</span>
  
  
      <span class="nc">Example</span> <span class="mi">3</span><span class="o">:</span> <span class="nc">One</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">one</span> <span class="n">association</span> <span class="n">from</span> <span class="n">an</span> <span class="n">embeddable</span> <span class="kd">class</span> <span class="nc">to</span> <span class="n">another</span> <span class="n">entity</span><span class="o">.</span>
  
      <span class="nd">@Entity</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
         <span class="nd">@Id</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
         <span class="nd">@Embedded</span> <span class="nc">LocationDetails</span> <span class="n">location</span><span class="o">;</span>
         <span class="o">...</span>
      <span class="o">}</span>
  
      <span class="nd">@Embeddable</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocationDetails</span> <span class="o">{</span>
         <span class="kt">int</span> <span class="n">officeNumber</span><span class="o">;</span>
         <span class="nd">@OneToOne</span> <span class="nc">ParkingSpot</span> <span class="n">parkingSpot</span><span class="o">;</span>
         <span class="o">...</span>
      <span class="o">}</span>
  
      <span class="nd">@Entity</span>
      <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ParkingSpot</span> <span class="o">{</span>
         <span class="nd">@Id</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
         <span class="nc">String</span> <span class="n">garage</span><span class="o">;</span>
         <span class="nd">@OneToOne</span><span class="o">(</span><span class="n">mappedBy</span><span class="o">=</span><span class="s">"location.parkingSpot"</span><span class="o">)</span> <span class="nc">Employee</span> <span class="n">assignedTo</span><span class="o">;</span>
          <span class="o">...</span> 
      <span class="o">}</span> 
</code></pre></div></div><p> <p><code class="language-plaintext highlighter-rouge">@OneToOne</code>인데 양방향 관계인 경우 관계의 주격이 아닌 측에서 <code class="language-plaintext highlighter-rouge">mappedBy</code>를 선언하라고 돼있다.<p>여타 다른 매핑과 크게 다를 게 없어 보이는 설명과 예제들이다.<p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Target</span><span class="o">({</span><span class="no">METHOD</span><span class="o">,</span> <span class="no">FIELD</span><span class="o">})</span> 
<span class="nd">@Retention</span><span class="o">(</span><span class="no">RUNTIME</span><span class="o">)</span>

<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">OneToOne</span> <span class="o">{</span>

    <span class="nc">Class</span> <span class="nf">targetEntity</span><span class="o">()</span> <span class="k">default</span> <span class="kt">void</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>

    <span class="nc">CascadeType</span><span class="o">[]</span> <span class="nf">cascade</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

    <span class="nc">FetchType</span> <span class="nf">fetch</span><span class="o">()</span> <span class="k">default</span> <span class="no">EAGER</span><span class="o">;</span>

    <span class="kt">boolean</span> <span class="nf">optional</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

    <span class="nc">String</span> <span class="nf">mappedBy</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

    <span class="kt">boolean</span> <span class="nf">orphanRemoval</span><span class="o">()</span> <span class="k">default</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">CascadeType</span> <span class="o">{</span> 

    <span class="o">/</span> <span class="nc">Cascade</span> <span class="n">all</span> <span class="n">operations</span> <span class="o">*/</span>
    <span class="no">ALL</span><span class="o">,</span> 

    <span class="o">/</span> <span class="nc">Cascade</span> <span class="n">persist</span> <span class="n">operation</span> <span class="o">*/</span>
    <span class="no">PERSIST</span><span class="o">,</span> 

    <span class="o">/</span> <span class="nc">Cascade</span> <span class="n">merge</span> <span class="n">operation</span> <span class="o">*/</span>
    <span class="no">MERGE</span><span class="o">,</span> 

    <span class="o">/</span> <span class="nc">Cascade</span> <span class="n">remove</span> <span class="n">operation</span> <span class="o">*/</span>
    <span class="no">REMOVE</span><span class="o">,</span>

    <span class="o">/</span> <span class="nc">Cascade</span> <span class="n">refresh</span> <span class="n">operation</span> <span class="o">*/</span>
    <span class="no">REFRESH</span><span class="o">,</span>

    <span class="o">/</span>
     <span class="o">*</span> <span class="nc">Cascade</span> <span class="n">detach</span> <span class="n">operation</span>
     <span class="o">*</span>
     <span class="o">*</span> <span class="nd">@since</span> <span class="mf">2.0</span>
     <span class="o">*</span> 
     <span class="o">*/</span>   
    <span class="no">DETACH</span>
<span class="o">}</span>
</code></pre></div></div><p> <hr /><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Class</span> <span class="nf">targetEntity</span><span class="o">()</span> <span class="k">default</span> <span class="kt">void</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>

<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">The</span> <span class="n">entity</span> <span class="kd">class</span> <span class="nc">that</span> <span class="n">is</span> <span class="n">the</span> <span class="n">target</span> <span class="n">of</span> <span class="n">the</span> <span class="n">association</span><span class="o">.</span>
<span class="nc">Defaults</span> <span class="n">to</span> <span class="n">the</span> <span class="n">type</span> <span class="n">of</span> <span class="n">the</span> <span class="n">field</span> <span class="n">or</span> <span class="n">property</span> <span class="n">that</span> <span class="n">stores</span> <span class="n">the</span> <span class="n">association</span>
</code></pre></div></div><p> <p>기본값이 필드의 클래스이므로 굳이 적지 않아도 된다.<p>많이 보이는데 정확히 뭐 하는 건지 몰랐었어서 헷갈렸는데 알고 보니 엔간하면 그냥 생략하는 게 좋은 것 같다.<p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@OneToOne</span><span class="o">(</span><span class="n">targetEntity</span> <span class="o">=</span> <span class="nc">Test</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"TESTSEQ"</span><span class="o">,</span> <span class="n">referencedColumnName</span> <span class="o">=</span> <span class="s">"TESTSEQ"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">Test</span> <span class="n">test</span><span class="o">;</span>


<span class="nd">@OneToOne</span>
<span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"TESTSEQ"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">Test</span> <span class="n">test</span><span class="o">;</span>
</code></pre></div></div><p> <p>위와 아래는 같은 코드이다.<p>위의 코드는 이미 내부적으로 Default로 선언돼있는 코드를 굳이 또 선언하였다.<p>아래 코드는 이미 선언돼있는 코드들을 생략하여 작성한 형태이다.<p> <hr /><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">CascadeType</span><span class="o">[]</span> <span class="nf">cascade</span><span class="o">()</span> <span class="k">default</span> <span class="o">{};</span>

<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">The</span> <span class="n">operations</span> <span class="n">that</span> <span class="n">must</span> <span class="n">be</span> <span class="n">cascaded</span> <span class="n">to</span> <span class="n">the</span> <span class="n">target</span> <span class="n">of</span> <span class="n">the</span> <span class="n">association</span><span class="o">.</span>
<span class="nc">By</span> <span class="k">default</span> <span class="n">no</span> <span class="n">operations</span> <span class="n">are</span> <span class="n">cascaded</span><span class="o">.</span>
</code></pre></div></div><p> <p>관계가 맺어져 있는 엔티티에 변경사항이 생길 경우 같이 변경될지의 여부다.<p>기본값은 사용하지 않음이며, 잘 사용하면 매우 편리한 기능이 될 수 있다.<p>하지만 제대로 알지 못하고 사용하면 데이터가 통째로 꼬여버리거나,<p>드랍되거나 하는 대참사가 발생할 수 있으므로 사전에 충분한 학습을 하고 사용해야 한다.<p> <hr /><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="nf">mappedBy</span><span class="o">()</span> <span class="k">default</span> <span class="s">""</span><span class="o">;</span>

<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">The</span> <span class="n">field</span> <span class="n">that</span> <span class="n">owns</span> <span class="n">the</span> <span class="n">relationship</span><span class="o">.</span>
<span class="nc">This</span> <span class="n">element</span> <span class="n">is</span> <span class="n">only</span> <span class="n">specified</span> <span class="n">on</span> <span class="n">the</span> <span class="nf">inverse</span> <span class="o">(</span><span class="n">non</span><span class="o">-</span><span class="n">owning</span><span class="o">)</span> <span class="n">side</span> <span class="n">of</span> <span class="n">the</span> <span class="n">association</span><span class="o">.</span>
</code></pre></div></div><p> <p>양방향 매핑 시 연관관계의 주인을 명시적으로 선언해준다.<p>이 옵션을 사용해 관계를 엮어 줄 경우 주격이 아니더라도 엔티티 그래프 탐색이 가능해진다.<p>다만 CUD(Create, Update, Delete)에 대해서는 주격 엔티티에서만 정상 동작하므로 주의가 필요하다.<p>주격이 아닌 엔티티에서 선언하면 된다.<p> <hr /><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="nf">orphanRemoval</span><span class="o">()</span> <span class="k">default</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">Whether</span> <span class="n">to</span> <span class="n">apply</span> <span class="n">the</span> <span class="n">remove</span> <span class="n">operation</span> <span class="n">to</span> <span class="n">entities</span> <span class="n">that</span> <span class="n">have</span> <span class="n">been</span> <span class="n">removed</span>
<span class="n">from</span> <span class="n">the</span> <span class="n">relationship</span> <span class="n">and</span> <span class="n">to</span> <span class="n">cascade</span> <span class="n">the</span> <span class="n">remove</span> <span class="n">operation</span> <span class="n">to</span> <span class="n">those</span> <span class="n">entities</span><span class="o">.</span>
</code></pre></div></div><p> <p>보통 1:N 관계 테이블 설정할 때 옵션을 추가해준다.<p><code class="language-plaintext highlighter-rouge">PK(JoinColumn)</code> 값이 null로 변한 자식은 고아 객체라고 한다.<p>부모 객체와의 연결점을 잃어버렸다는 뜻이다.<p><code class="language-plaintext highlighter-rouge">orphanRemoval</code> 옵션은 바로 이 고아 객체를 자동으로 삭제해주는 역할을 한다.<p>보통 자식 엔티티의 변경이 있다면 insert &gt; update &gt; update &gt; delete 순으로 이어지는데<p><code class="language-plaintext highlighter-rouge">orphanRemoval</code> 옵션을 적용하면 insert &gt; update &gt; delete 순으로 변경된다.<p>변경된 자식을 먼저 insert 하고, 기존의 자식을 null로 update 한다.<p>그리고 기존 null 처리된 자식을 delete 한다.<p> <hr /><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">FetchType</span> <span class="nf">fetch</span><span class="o">()</span> <span class="k">default</span> <span class="no">EAGER</span><span class="o">;</span>

<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">Whether</span> <span class="n">the</span> <span class="n">association</span> <span class="n">should</span> <span class="n">be</span> <span class="n">lazily</span> <span class="n">loaded</span> <span class="n">or</span> <span class="n">must</span> <span class="n">be</span> <span class="n">eagerly</span> <span class="n">fetched</span><span class="o">.</span> 
<span class="nc">The</span> <span class="no">EAGER</span> <span class="n">strategy</span> <span class="n">is</span> <span class="n">a</span> <span class="n">requirement</span> <span class="n">on</span> <span class="n">the</span> <span class="n">persistence</span> <span class="n">provider</span> <span class="n">runtime</span> <span class="n">that</span> <span class="n">the</span> <span class="n">associated</span> <span class="n">entity</span> <span class="n">must</span> <span class="n">be</span> <span class="n">eagerly</span> <span class="n">fetched</span><span class="o">.</span> 
<span class="nc">The</span> <span class="no">LAZY</span> <span class="n">strategy</span> <span class="n">is</span> <span class="n">a</span> <span class="n">hint</span> <span class="n">to</span> <span class="n">the</span> <span class="n">persistence</span> <span class="n">provider</span> <span class="n">runtime</span><span class="o">.</span>



<span class="kt">boolean</span> <span class="nf">optional</span><span class="o">()</span> <span class="k">default</span> <span class="kc">true</span><span class="o">;</span>

<span class="o">(</span><span class="nc">Optional</span><span class="o">)</span> <span class="nc">Whether</span> <span class="n">the</span> <span class="n">association</span> <span class="n">is</span> <span class="n">optional</span><span class="o">.</span> 
<span class="nc">If</span> <span class="n">set</span> <span class="n">to</span> <span class="kc">false</span> <span class="n">then</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="kc">null</span> <span class="n">relationship</span> <span class="n">must</span> <span class="n">always</span> <span class="n">exist</span><span class="o">.</span>
</code></pre></div></div><p> <p><code class="language-plaintext highlighter-rouge">@OneToOne</code> 사용을 지양해야 하는 가장 큰 원인 두 가지다.<p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@OneToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"bid"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="no">B</span> <span class="n">b</span><span class="o">;</span>
<span class="o">}</span>
	

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">B</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@OneToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"cid"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="no">C</span> <span class="n">c</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">C</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p> <p>일대일 단방향이다.<p>A 엔티티를 <code class="language-plaintext highlighter-rouge">findById</code>를 통해 조회하면<p>A+B가 날아가고, 이후 B+C가 날아간다.<p>즉 <code class="language-plaintext highlighter-rouge">EAGER로</code> 동작하며 동시에 N+1문제가 발생한다.<p> <p>원인은 무엇이고 해결은 어떻게 해야 할까?<p> <p><code class="language-plaintext highlighter-rouge">optional</code>은 기본적으로 <code class="language-plaintext highlighter-rouge">true</code>로 설정돼있다.<p>이 말인즉슨, 관계를 맺은 엔티티가 nullable 하다는 것인데,<p>이렇게 되면 하이버네이트는 매핑된 엔티티가 null이었을 경우의 수를 배제할 수 없기 때문에 프록시를 채워줄 수 없다.<p>그래서 <code class="language-plaintext highlighter-rouge">optional=true</code>, <code class="language-plaintext highlighter-rouge">@OneToOne</code> 매핑이 돼있는 경우 (=모두 기본값인 경우)<p>하이버네이트는 위의 가능성으로 인해 일단 쿼리를 날려보지 않고서는(EAGER) null을 채워줘야 할지,<p>프록시를 채워줘야 할지(LAZY) 알 수 없기 때문에 무조건 쿼리를 한번 날려보게 되며,<p>이러한 내부 동작 원리로 인해 무조건적으로 EAGER로 동작하고 <code class="language-plaintext highlighter-rouge">N+1문제</code>가 발생하는 것이다.<p> <p>내부적으로 이런 동작을 하고 세부적으로 파고들면 훨씬 더 복잡하다.<p>더 파보려다가 머리가 지끈지끈거려서 관뒀다.<p>아무튼 일반적으로 JPA를 사용하는 모든 개발자가 이런 내부 동작을 자세히 알기 어렵고<p>이로 인해 N+1문제가 자주 발생하기 때문에 가급적 @OneToOne 사용을 자제해야 한다.<p> <p>해결방법은 간단하다.<p><code class="language-plaintext highlighter-rouge">optional=false</code>로 지정하여 <code class="language-plaintext highlighter-rouge">not null</code>. 즉, 엔티티가 무조건 있음을 보장해준다면<p>하이버네이트는 null일 수도 있는 경우의 수를 완벽히 배제하여 프록시를 채워줄 수 있게 되기 때문에 LAZY설정이 동작하게 된다.<p>이러면 즉시로딩이 아닌 지연로딩이 되므로 N+1문제 또한 해결할 수 있다.<p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@OneToOne</span><span class="o">(</span><span class="n">fetch</span> <span class="o">=</span> <span class="nc">FetchType</span><span class="o">.</span><span class="na">LAZY</span><span class="o">,</span> <span class="n">optional</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="c1">// Not Null</span>
</code></pre></div></div><p> <p>하지만 모든 걸 다 떠나서 애초에 <code class="language-plaintext highlighter-rouge">@OneToOne</code> 관계를 맺는다는 것은 애시당초 DB설계를 잘못했을 가능성이 매우 높다.<p>굳이 테이블을 분리하여 <code class="language-plaintext highlighter-rouge">@OneToOne</code> 관계를 맺어야만 하는 상황인지부터 다시 점검해봐야 한다.<p> <p>그래서 개인적으로 <code class="language-plaintext highlighter-rouge">@ManyToOne</code> 단방향 관계만 사용하는 것을 선호하며,<p>그 이상의 복잡한 관계가 생길 경우 DB설계를 검토하거나, <code class="language-plaintext highlighter-rouge">Querydsl</code>을 사용하는 편이다.<p>마지막으로 다른 매핑 방식은 이러한 문제가 발생하지 않는 이유가 뭔고 하니…<p> <p><code class="language-plaintext highlighter-rouge">@OneToOne</code>을 제외한 다른 매핑 방식들은 null이건 아니건 <code class="language-plaintext highlighter-rouge">Collection</code>을 채워주면 되기 때문에<p>이 경우 <code class="language-plaintext highlighter-rouge">Collection Wrapper</code>라는 것을 이용하게 되어 LAZY가 먹히는 것이며,<p><code class="language-plaintext highlighter-rouge">@ManyToOne</code>은 전통적인 RDB의 N:1 관계로 역시 값이 항상 존재하기 때문에 LAZY가 먹힌다.<p> </article><hr class="dingbat related mb6" /><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"> <img src="/assets/img/me.gif" srcset="/assets/img/me.gif 1x,/assets/img/me.gif 2x" alt="shirohoo" class="avatar" width="120" height="120" loading="lazy" /><h2 class="page-title hr-bottom"> About Me</h2><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/shirohoo" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:shirohoo4102@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://shirohoo.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Random Posts</h2><ul class="related-posts"><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2022-03-10T00:00:00+00:00">10 Mar 2022</time> <a href="/cs/operating-system/2022-03-10-virtual-memory/" class="flip-title"><span>운영체제(Operating System) 8강</span></a></div><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2021-12-04T00:00:00+00:00">04 Dec 2021</time> <a href="/backend/server-side/2021-12-04-linux/" class="flip-title"><span>리눅스 기초</span></a></div><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2021-08-30T00:00:00+00:00">30 Aug 2021</time> <a href="/spring/spring-security/2021-08-30-http-login/" class="flip-title"><span>Spring Security - HTTP API 기반의 인증 아키텍처</span></a></div></ul></aside><aside class="comments related" role="complementary"><h2 class="hr-bottom">Comments</h2><script src="https://utteranc.es/client.js" repo= shirohoo/shirohoo.github.io.comments issue-term= pathname theme= github-light crossorigin= "anonymous" async> </script></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2022. All rights reserved. </small><nav class="legal"><small> <a class="heading flip-title" href="/LICENSE/">LICENSE</a> </small></nav><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(8,46,57);background-image:url(/assets/img/sidebar-bg.gif)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/me.gif" class="avatar" alt="돈 받고 일하면 프로" width="120" height="120" loading="lazy" /> </a> <a class="sidebar-title" href="/"><h2 class="h1">돈 받고 일하면 프로</h2></a><p class=""> 우리는 직장에서 훈련을 하기 때문에 매번 실수를 반복한다</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li><div class="menu-wrapper" onmouseover="javascript:spread(9)" onmouseout="javascript:spread(9)"> <a id="_drawer--opened" href="/about/" class="sidebar-nav-item " > About Me </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(10)" onmouseout="javascript:spread(10)"> <a href="/diary/" class="sidebar-nav-item " > Diary </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(11)" onmouseout="javascript:spread(11)"> <a href="/financial/" class="sidebar-nav-item " > Financial </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(12)" onmouseout="javascript:spread(12)"> <a href="/debugging/" class="sidebar-nav-item " > Debugging </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(13)" onmouseout="javascript:spread(13)"> <button class="spread-btn"> <span id="spread-icon-13" class="material-icons">arrow_right</span> </button> <a href="/cs/" class="sidebar-nav-item " > Computer Science </a><div id="submenu-13" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/cs/operating-system/" > 운영체제 </a><li> <a class="sidebar-nav-item " href="/cs/software-design/" > 소프트웨어 설계 </a><li> <a class="sidebar-nav-item " href="/cs/database-construct/" > 데이터베이스 구축 </a><li> <a class="sidebar-nav-item " href="/cs/leverage-programming/" > 프로그래밍 활용 </a><li> <a class="sidebar-nav-item " href="/cs/information-system/" > 정보시스템 구축 </a><li> <a class="sidebar-nav-item " href="/cs/data-structure-algorithm/" > 자료구조 & 알고리즘 </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(14)" onmouseout="javascript:spread(14)"> <button class="spread-btn"> <span id="spread-icon-14" class="material-icons">arrow_right</span> </button> <a href="/backend/" class="sidebar-nav-item " > BackEnd </a><div id="submenu-14" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/backend/test/" > Test </a><li> <a class="sidebar-nav-item " href="/backend/java/" > Java </a><li> <a class="sidebar-nav-item " href="/backend/python/" > Python </a><li> <a class="sidebar-nav-item " href="/backend/groovy/" > Groovy </a><li> <a class="sidebar-nav-item " href="/backend/gradle/" > Gradle </a><li> <a class="sidebar-nav-item " href="/backend/database/" > Database </a><li> <a class="sidebar-nav-item " href="/backend/server-side/" > Server Side </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(15)" onmouseout="javascript:spread(15)"> <button class="spread-btn"> <span id="spread-icon-15" class="material-icons">arrow_right</span> </button> <a href="/spring/" class="sidebar-nav-item " > Spring </a><div id="submenu-15" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/spring/spring-boot/" > Spring Boot </a><li> <a class="sidebar-nav-item " href="/spring/spring-mvc/" > Spring MVC </a><li> <a class="sidebar-nav-item " href="/spring/spring-security/" > Spring Security </a><li> <a class="sidebar-nav-item " href="/spring/spring-data-jpa/" > Spring Data Jpa </a><li> <a class="sidebar-nav-item " href="/spring/spring-batch/" > Spring Batch </a><li> <a class="sidebar-nav-item " href="/spring/spring-webflux/" > Spring WebFlux </a><li> <a class="sidebar-nav-item " href="/spring/spring-cloud/" > Spring Cloud </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(16)" onmouseout="javascript:spread(16)"> <button class="spread-btn"> <span id="spread-icon-16" class="material-icons">arrow_right</span> </button> <a href="/frontend/" class="sidebar-nav-item " > FrontEnd </a><div id="submenu-16" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/frontend/javascript/" > Javascript </a><li> <a class="sidebar-nav-item " href="/frontend/vue/" > Vue.js </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(17)" onmouseout="javascript:spread(17)"> <button class="spread-btn"> <span id="spread-icon-17" class="material-icons">arrow_right</span> </button> <a href="/ide/" class="sidebar-nav-item " > IDE </a><div id="submenu-17" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/ide/intellij/" > IntelliJ </a></ul></div></div></ul></nav><div style="text-align:center;"> <a href="https://hits.seeyoufarm.com"> <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fshirohoo.github.io&count_bg=%23A30AC9&title_bg=%23686262&icon=electron.svg&icon_color=%23FFFFFF&title=hits&edge_flat=false"/> </a></div><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/shirohoo" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:shirohoo4102@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://shirohoo.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/assets/js/hydejack-9.1.5.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.1.5.js" nomodule defer></script> <!-- mouse event cancel --> <script> document.oncontextmenu = function (e) { return false; }; document.onselectstart = function (e) { return false; }; </script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ ga('create', 'G-NKVY3834TW', 'auto'); /**/ var pushStateEl = d.getElementById('_pushState'); var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template> <template id="_dark-mode-template"> <button id="_dark-mode" class="nav-btn no-hover" > <span class="sr-only">Dark Mode</span> <span class="icon-brightness-contrast"></span> </button> </template> <template id="_search-template"> <button id="_search" class="nav-btn no-hover"> <label class="sr-only" for="_search-input">Search</label> <span class="icon-search"></span> </button><div id="_search-box"> <input id="_search-input" type="search" class="form-control form-control-lg nav-btn" placeholder="Type something…" /> <button type="reset" class="nav-btn no-hover"> <span class="sr-only">Close</span> <span class="icon-cross"></span> </button></div><div id="_hits"></div></template></div></html>
