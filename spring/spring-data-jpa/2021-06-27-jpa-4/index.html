<!DOCTYPE html>
<html lang="ko"><head><title>JPA 기초 4 - 엔티티 매핑(Entity Mapping) | 돈 받고 일하면 프로</title><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="JPA 기초 4 - 엔티티 매핑(Entity Mapping)" /><meta name="author" content="shirohoo" /><meta property="og:locale" content="ko_KR, en_US" /><meta name="description" content="엔티티 매핑에 대한 기본 개념" /><meta property="og:description" content="엔티티 매핑에 대한 기본 개념" /><meta property="og:site_name" content="돈 받고 일하면 프로" /><meta property="og:image" content="/assets/img/spring/spring-data-jpa/hibernate.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-27T23:43:00+00:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="/assets/img/spring/spring-data-jpa/hibernate.jpg" /><meta property="twitter:title" content="JPA 기초 4 - 엔티티 매핑(Entity Mapping)" /><meta name="google-site-verification" content="google-site-verification=QP6xbvFbQ-RK1rEeDlge0lpDYvcCG0FdC5crTSd-aDs" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"shirohoo"},"description":"엔티티 매핑에 대한 기본 개념","url":"/spring/spring-data-jpa/2021-06-27-jpa-4/","@type":"BlogPosting","image":"/assets/img/spring/spring-data-jpa/hibernate.jpg","headline":"JPA 기초 4 - 엔티티 매핑(Entity Mapping)","dateModified":"2024-03-24T17:42:01+00:00","datePublished":"2021-06-27T23:43:00+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/img/me.gif"},"name":"shirohoo"},"mainEntityOfPage":{"@type":"WebPage","@id":"/spring/spring-data-jpa/2021-06-27-jpa-4/"},"@context":"https://schema.org"}</script><meta name="keywords" content="java,kotlin,python,spring,backend"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="돈 받고 일하면 프로"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="돈 받고 일하면 프로"><meta name="theme-color" content="rgb(8,46,57)"><meta name="generator" content="Hydejack v9.1.5" /><link rel="alternate" href="/spring/spring-data-jpa/2021-06-27-jpa-4/" hreflang="ko-kr, en-us"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="돈 받고 일하면 프로" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"><link rel="dns-prefetch" href="/assets/js/search-worker-9.1.5.js" as="worker" id="_hrefSearch"><link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_katexPreload"> <noscript><link rel="stylesheet" href="/assets/bower_components/katex/dist/katex.min.css"></noscript> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._advertise = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2024-03-24T17:42:53+00:00', }; w._clapButton = false; }(window);</script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}#_dark-mode{font-size:1.25rem}@media screen{body.light-mode{--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg)}body.light-mode .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}body.dark-mode{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body.dark-mode .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body.dark-mode p>code,body.dark-mode li>code,body.dark-mode table code{background-color:white;color:black;border-radius:5px;font-weight:bold}}@media screen and (prefers-color-scheme: dark){body{--body-color: #ccc;--body-bg: var(--dark-mode-body-bg);--border-color: var(--dark-mode-border-color);--gray: rgba(255,255,255,.5);--gray-bg: rgba(255,255,255,.033);--gray-text: rgba(255,255,255,.625);--menu-text: rgba(255,255,255,.25);--inv-body-color: #333;--inv-body-bg: #fff}body .content{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body p>code,body li>code,body table code{background-color:white;color:black;border-radius:5px;font-weight:bold}.tippy-content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}}html{--font-family: Architects Daughter;--font-family-heading: Architects Daughter;--code-font-family: ui-monospace,Menlo,Monaco,Ligamonacop,Cascadia Mono,Segoe UI Mono,Roboto Mono,Oxygen Mono,Ubuntu Monospace,Source Code Pro,Fira Mono,Droid Sans Mono,Courier New,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: var(--dark-mode-body-bg);--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:3rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,#markdown-toc[title]:before,.note[title]:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.sidebar a{text-shadow:rgba(0,0,0,0.25) 0.1rem 0.1rem 0.15rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"} .clearfix,main:not(.layout-resume) .columns::after{content:"";display:table;clear:both}.color-transition,main:not(.layout-resume) .project-card{transition:none}main:not(.layout-resume) .columns{margin-left:-1rem;display:flex;flex-wrap:wrap;contain:content;padding-top:1rem;margin-top:1rem;padding-right:1rem;margin-right:-1rem}main:not(.layout-resume) .column{float:left;padding-left:1rem;margin-bottom:2rem;width:100%;display:flex}@media screen and (min-width: 42em){main:not(.layout-resume) .columns{margin-left:-2rem;margin-right:-2rem}main:not(.layout-resume) .column-1-2{width:50%}}@media screen and (min-width: 1664px){main:not(.layout-resume) .columns-break{width:calc(50vw + 25rem)}main:not(.layout-resume) .columns-break>.column-1-2,main:not(.layout-resume) .columns-break>.column-1{width:27.5rem}}@media print{main:not(.layout-resume) .columns{display:block}main:not(.layout-resume) .column{display:block;width:50%}}main:not(.layout-resume) .project-card{width:100%;color:var(--gray-text);background-color:var(--gray-bg);padding-bottom:1rem;position:relative;overflow:hidden;box-shadow:0.125rem 0.125rem 1rem rgba(0,0,0,0.2);contain:content;border-radius:.5rem;page-break-inside:avoid;transition:transform 500ms ease;will-change:transform}main:not(.layout-resume) .project-card:hover{transform:translateY(-0.25rem);transition:transform 250ms ease}main:not(.layout-resume) .project-card>a.flip-project{display:block}main:not(.layout-resume) .project-card>a.flip-project .project-card-img{margin-bottom:0}main:not(.layout-resume) .project-card>a.flip-project .project-card-img img{display:block;border-top-left-radius:.5rem;border-top-right-radius:.5rem}main:not(.layout-resume) .project-card a{position:relative;z-index:1}main:not(.layout-resume) .project-card a.fill-card{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0}main:not(.layout-resume) .project-card>.project-card-title,main:not(.layout-resume) .project-card>.project-card-text{text-align:center;padding:0 1rem}main:not(.layout-resume) .project-card>.project-card-title{display:block;font-size:1.08rem;margin-top:.75rem;margin-bottom:.25rem;color:inherit}main:not(.layout-resume) .project-card>.project-card-text{margin:.25rem 0}main:not(.layout-resume) .column-1>.project-card>.project-card-title{font-size:1.2rem}main:not(.layout-resume) .column-1>.project-card>.project-card-text{font-size:1rem}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.1.5.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Architects%20Daughter&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.1.5.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Architects%20Daughter&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-highlight: rgba(79,177,186,0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57);--dark-mode-body-bg: #282f31;--dark-mode-border-color: #343c3f}</style><!--<![endif]--> <!-- robots --><meta name="NaverBot" content="All"/><meta name="NaverBot" content="index,follow"/><meta name="Yeti" content="All"/><meta name="Yeti" content="index,follow"/><meta name="naver-site-verification" content="82d4d6173147a0aba3bdf3afb612c7188e832cf1" /><meta name="google-site-verification" content="qGe3nTw8iiwhc_9vqrjuB8uB0AiMCGPzG8WNTHHC13I" /> <!-- Google AdSense --> <script data-ad-client="ca-pub-9270648935360607" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- favicons --><link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"> <!-- Code used for embedding Gumroad on the Hydejack Site. Left here for reference, feel free to delete. --><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <script src="/assets/js/sidebar-folder.js"></script><link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"> <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> <script src="/assets/js/swiper-control.js"></script> <script src="/assets/js/collapsible.js"></script> <script src="/assets/js/mouse-buble.js"></script><link rel="dns-prefetch" href="https://assets.gumroad.com"> <script type="module"> document.querySelector('hy-push-state').addEventListener('load', () => { let tocElement = document.getElementById("markdown-toc"); if(tocElement){ let affixedDiv = document.createElement("div"); affixedDiv.style.position = "relative"; affixedDiv.style.top = "-1rem"; tocElement.parentNode.insertBefore(affixedDiv, tocElement); let headerList = document.getElementsByClassName("permalink"); if(headerList){ let prevElement; window.addEventListener("scroll", () => { let hurdleTop = affixedDiv.getBoundingClientRect().top; if(hurdleTop <= 0) tocElement.classList.add("affix"); else tocElement.classList.remove("affix"); for(let i=0;i<headerList.length;i++){ if(headerList[i].getBoundingClientRect().top >= 0){ prevElement?.style.removeProperty("font-weight"); let tocId = "markdown-toc-" + headerList[i].parentNode.id; prevElement = document.getElementById(tocId); prevElement.style.fontWeight = "bold";; break; } } }); } } }); </script> <script type="module"> let p; const promisify = f => x => new Promise(r => f(x).addEventListener('load', r)); const loadJS = promisify(window.loadJS); document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad-embed.js'); await p; if (!window.GumroadEmbed) { await new Promise(function check1(res) { if ('createGumroadEmbed' in window) res(window.createGumroadEmbed()); else setTimeout(() => check1(res), 200); }); } await new Promise(function check2(res) { if ('GumroadEmbed' in window) res(GumroadEmbed.reload()); else setTimeout(() => check2(res), 200); }); } }, { rootMargin: '1440px' }); document.querySelectorAll('.gumroad-product-embed').forEach(el => io.observe(el)); }); </script> <script type="module"> let p; const promisify = f => x => new Promise(r => f(x).addEventListener('load', r)); const loadJS = promisify(window.loadJS); document.querySelector('hy-push-state').addEventListener('load', () => { const io = new IntersectionObserver(async (entries) => { if (entries.some(x => x.isIntersecting)) { p = p || loadJS('https://gumroad.com/js/gumroad.js'); await p; if (!window.GumroadOverlay) { await new Promise(function check(res) { if ('createGumroadOverlay' in window) res(window.createGumroadOverlay()); else setTimeout(() => check(res), 200); }); } } }, { rootMargin: '300px' }); document.querySelectorAll('.gumroad-button').forEach(el => io.observe(el)); }); </script><body class="no-break-layout"> <script> window._sunrise = 6; window._sunset = 18; !function(e,s){var d="light-mode",o="dark-mode",a=(new Date).getHours();"matchMedia"in e&&e.matchMedia("(prefers-color-scheme)")||(o=(e=a<=e._sunrise||a>=e._sunset?o:d)==o?d:o,s.body.classList.add(e),s.body.classList.remove(o))}(window,document); </script> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a><div class="nav-span"></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/">home</a><li> <span>/</span> <a href="/spring/">spring</a><li> <span>/</span> <a href="/spring/spring-data-jpa/">spring-data-jpa</a><li> <span>/</span> <span>2021-06-27-jpa-4</span></ul></nav><script async src="https://www.googletagmanager.com/gtag/js?id=G-NKVY3834TW"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-NKVY3834TW'); </script><article id="post-spring-spring-data-jpa-jpa-4" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> JPA 기초 4 - 엔티티 매핑(Entity Mapping)</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2021-06-27T23:43:00+00:00">27 Jun 2021</time> &nbsp;in&nbsp;<a href="/spring/" class="flip-title"><u>Spring</u></a> / <span>Spring-data-jpa</span> </span></div><div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img"> <img src="/assets/img/spring/spring-data-jpa/hibernate.jpg" alt="JPA 기초 4 - 엔티티 매핑(Entity Mapping)" width="864" height="486" loading="lazy" /></div><p class="note-sm" > <code class="language-plaintext highlighter-rouge">엔티티 매핑</code>에 대한 기본 개념</header><ul id="markdown-toc"><li><a href="#-entity-mapping" id="markdown-toc--entity-mapping">📕 Entity Mapping</a><ul><li><a href="#-naming-strategy" id="markdown-toc--naming-strategy">💨 Naming Strategy..</a></ul><li><a href="#-entity" id="markdown-toc--entity">🚀 @Entity</a><ul><li><a href="#entity-제약사항" id="markdown-toc-entity-제약사항">@Entity 제약사항</a></ul><li><a href="#-table" id="markdown-toc--table">🚀 @Table</a><ul><li><a href="#-ddl-옵션은-항상-신중하게-확인해야-한다-" id="markdown-toc--ddl-옵션은-항상-신중하게-확인해야-한다-">💥 DDL 옵션은 항상 신중하게 확인해야 한다 💥</a></ul><li><a href="#-id-generatedvalue" id="markdown-toc--id-generatedvalue">🚀 @Id, @GeneratedValue</a><li><a href="#-column" id="markdown-toc--column">🚀 @Column</a><li><a href="#-enumerated" id="markdown-toc--enumerated">🚀 @Enumerated</a><li><a href="#-temporal" id="markdown-toc--temporal">🚀 @Temporal</a><li><a href="#-lob" id="markdown-toc--lob">🚀 @Lob</a><li><a href="#-transient" id="markdown-toc--transient">🚀 @Transient</a><li><a href="#-access" id="markdown-toc--access">🚀 @Access</a></ul><p> <h1 id="-entity-mapping">📕 Entity Mapping</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123510343-dbccf880-d6b5-11eb-9c4e-041642747546.png" alt="image" /><p><br /><p>JPA를 사용하는 데 가장 중요한 일은 Entity와 Table을 정확하게 매핑하는 것이다.<p>JPA의 매핑 어노테이션은 크게 4가지로 분류할 수 있다.<p><br /><ul><li>객체(Entity) ↔ 테이블(Table): <code class="language-plaintext highlighter-rouge">@Entity</code>, <code class="language-plaintext highlighter-rouge">@Table</code><li>기본 키(PK, Primary Key): <code class="language-plaintext highlighter-rouge">@Id</code><li>필드(Field) ↔ 컬럼(Column): <code class="language-plaintext highlighter-rouge">@Column</code><li>연관관계(FK, Foreign Key): <code class="language-plaintext highlighter-rouge">@ManyToOne</code>, <code class="language-plaintext highlighter-rouge">@ManyToMany</code>, <code class="language-plaintext highlighter-rouge">@OneToMany</code>, <code class="language-plaintext highlighter-rouge">@OneToOne</code>, <code class="language-plaintext highlighter-rouge">@JoinColumn</code></ul><p><br /><h3 id="-naming-strategy">💨 Naming Strategy..</h3><hr /><p><code class="language-plaintext highlighter-rouge">Spring Data Jpa</code> 사용시 <code class="language-plaintext highlighter-rouge">hibernate</code>가 기본 구현체로 채택돼있고, hibernate 매핑시 <code class="language-plaintext highlighter-rouge">ImprovedNamingStrategy</code>를 기본 클래스로 사용하고 있는걸로 판단된다.<p>같은 <code class="language-plaintext highlighter-rouge">NamingStrategy</code> 인터페이스를 구현한 <code class="language-plaintext highlighter-rouge">DefaultNamingStrategy</code>도 존재하는데, 이름만 보면 이녀석이 디폴트가 맞는 것 같은데…<p>정확한 동작과 내부 구현에 대해서는 추후 심도깊게 파봐야겠다.<p>일단 <code class="language-plaintext highlighter-rouge">ImprovedNamingStrategy</code>는 간단하게<p><br /><ul><li>소문자 -&gt; 소문자<li>대문자 -&gt; 대문자<li>카멜 케이스 -&gt; 스네이크 케이스</ul><p><br /><p>로 변환하여 매핑해주는 걸로 보인다.<p><br /><h1 id="-entity">🚀 @Entity</h1><hr /><p>이 어노테이션이 붙은 클래스는 JPA에서 관리하게 된다.<p>따라서 JPA의 모든 기능을 이용하고자 한다면 필수적으로 사용하게 되는 어노테이션이다.<p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123519637-8ad5f800-d6e7-11eb-9db4-af1b383b871b.png" alt="image" /><p><br /><table><thead><tr><th>속성<th>기능<th>기본값<tbody><tr><td>name<td>JPA에서 사용할 엔티티 이름을 지정한다.<br /> 이후 JPQL등에서 이 이름을 사용한다.<br /> 프로젝트 전체에서 고유한 이름을 설정해야만 충돌로 인한 문제가 발생하지 않는다.<td>클래스 이름을 그대로 사용한다.</table><p><br /><h2 id="entity-제약사항">@Entity 제약사항</h2><hr /><ul><li>접근제한자가 <code class="language-plaintext highlighter-rouge">public</code>또는 <code class="language-plaintext highlighter-rouge">protected</code>인 기본 생성자가 반드시 필요하다.<li><code class="language-plaintext highlighter-rouge">final</code>, <code class="language-plaintext highlighter-rouge">enum</code>, <code class="language-plaintext highlighter-rouge">interface</code>, <code class="language-plaintext highlighter-rouge">inner</code> 클래스에서는 사용할 수 없다.<li>저장할 필드에 <code class="language-plaintext highlighter-rouge">final</code>을 사용할 수 없다.</ul><p><br /><p>엔티티 객체는 내부적으로 <code class="language-plaintext highlighter-rouge">Class.getDeclaredConstructor().newInstance()</code> 라는 자바 리플렉션을 사용하여 동작하는데 이 API는 생성자의 인수를 읽을 수 없기 때문에 인수가 존재하지 않는 기본 생성자가 반드시 필요하다.<p>JPA 구현체로 Hibernate 벤더를 사용하는 경우 Hibernate 내부적으로 바이트코드를 조작하는 라이브러리를 도입하여 이러한 이슈를 어느정도 보완해준다고 하나 역시 완벽한 해결책이 아니며 기본 생성자 없이 동작할 수도 있지만, 오히려 동작하지 않기도 하는 경우가 발생하여 오히려 더 안 좋은 상황을 야기할 수 있으므로, 기본 생성자 만큼은 반드시 생성하는걸 권고하고 있다.<p>기본적으로 자바 컴파일러는 클래스에 아무 생성자도 없으면 인수가 존재하지 않는 생성자, 즉 기본 생성자를 알아서 만들어 주지만 임의의 생성자를 한개 이상 작성하였다면 이때 자바 컴파일러는 기본 생성자를 생성해주지 않기 때문에 에러가 발생한다.<p>따라서 임의의 생성자를 작성하였을 경우 기본 생성자를 반드시 직접 작성 해 주어야 하며, 실무에서는 특별한 이유가 존재하지 않고서야 기본 생성자를 열어두지 않는 방향, 즉 제약적으로 개발하는게 일반적이기 때문에 <code class="language-plaintext highlighter-rouge">package-private</code> 또는 <code class="language-plaintext highlighter-rouge">private</code>으로 많이 작성하게 되나, 엔티티의 경우 반드시 <code class="language-plaintext highlighter-rouge">protected</code> 이상의 접근제한자가 허용되어 있어야 하기 때문에 일반적으론 <code class="language-plaintext highlighter-rouge">protected</code>로 많이 생성하게 된다.<p><br /><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Memeber</span><span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">protected</span> <span class="nf">Member</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="c1">// omitted for brevity</span>
<span class="o">}</span>

<span class="nd">@Entity</span>
<span class="nd">@NoArgsConstructor</span><span class="o">(</span><span class="n">access</span> <span class="o">=</span> <span class="nc">AccessLevel</span><span class="o">.</span><span class="na">PROTECTED</span><span class="o">)</span> <span class="c1">// use lombok</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Memeber</span><span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="c1">// omitted for brevity</span>
<span class="o">}</span> 
</code></pre></div></div><p><br /><h1 id="-table">🚀 @Table</h1><hr /><p>엔티티와 매핑할 데이터베이스 테이블을 지정한다.<p>생략하면 엔티티 이름을 기본값으로 사용한다고 하는데, 여기서 말하는 엔티티 이름이 <code class="language-plaintext highlighter-rouge">@Entity(name = "")</code>인지, <code class="language-plaintext highlighter-rouge">엔티티 클래스의 이름</code>인지는 명확하지 않다.<p>추후 따로 테스트를 통해 알아봐야겠다.<p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123519648-99241400-d6e7-11eb-9b61-68288db297ec.png" alt="image" /><p> <table><thead><tr><th>속성<th>기능<th>기본값<tbody><tr><td>name<td>JPA에서 사용할 엔티티 이름을 지정한다.<br /> 이후 JPQL등에서 이 이름을 사용한다.<br /> 프로젝트 전체에서 고유한 이름을 설정해야만 충돌로 인한 문제가 발생하지 않는다.<td>클래스 이름을 그대로 사용한다.<tr><td>catalog<td>catalog 기능이 있는 DB에서 catalog를 매핑한다.<td>-<tr><td>schema<td>schema 기능이 있는 DB에서 scheme를 매핑한다<td>-<tr><td>uniqueConstraints<td>DDL 생성 시 복합 유니크 인덱스를 생성한다. <br /> 단일 유니크 인덱스도 만들 수 있으나, <br />후술할 <code class="language-plaintext highlighter-rouge">@Column</code>에 더 좋은 기능이 존재하므로 잘 사용하지 않는다. <br />이 기능은 <code class="language-plaintext highlighter-rouge">설정파일의 DDL 옵션</code>에 따라 동작한다.<td>-</table><p><br /><blockquote><p>DDL 옵션<p><code class="language-plaintext highlighter-rouge">create</code>: 애플리케이션 시작 시 모든 스키마를 드랍 후 새로 생성<p><code class="language-plaintext highlighter-rouge">create-drop</code>: 애플리케이션 시작 시 모든 스키마 드랍 후 생성, 애플리케이션 종료 시 모든 스키마 드랍<p><code class="language-plaintext highlighter-rouge">update</code>: 애플리케이션 시작 시 기존 스키마에서 변경된 내역을 적용<p><code class="language-plaintext highlighter-rouge">validate</code>: 애플리케이션 시작 시 스키마가 제대로 매핑되는지 유효성 검사만 진행. 실패하면 애플리케이션을 종료<p><code class="language-plaintext highlighter-rouge">none</code>: JPA DDL 옵션을 사용하지 않음<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="n">application</span><span class="o">.</span><span class="na">yaml</span>
<span class="nl">spring:</span>
  <span class="nl">jpa:</span>
    <span class="nl">hibernate:</span>
      <span class="n">ddl</span><span class="o">-</span><span class="nl">auto:</span> <span class="n">create</span><span class="o">-</span><span class="n">drop</span>
</code></pre></div></div></blockquote><p><br /><h3 id="-ddl-옵션은-항상-신중하게-확인해야-한다-">💥 DDL 옵션은 항상 신중하게 확인해야 한다 💥</h3><hr /><p>실무에서 이 옵션으로 인해 중요한 테이블이 통째로 드랍되거나, 중요한 데이터가 삭제되는 등의 많은 사고가 발생한다.<p>실제로 필자도 토이 프로젝트에서 테이블을 날려먹어본 경험이 있으며, 이 때 백업을 해놓지 않아 굉장한 고생을 했었다.<p>이러한 현상은 주니어 시니어를 가리지 않고 JPA를 처음 접한 대부분의 개발자라면 마치 당연하게 겪는 성장통처럼 느껴질 정도다.<p>다만 <strong><em>실무에서 만큼은</em></strong> 이러한 사고를 치지 않도록 항상 스스로 주의해야 할 것이다.<p><br /><p><a href="https://youtu.be/SWZcrdmmLEU">💥 재난급 서버 장애내고 개발자 인생 끝날뻔 한 썰 - 납량특집! DB에 테이블이 어디로 갔지?</a><p><img src="https://user-images.githubusercontent.com/71188307/123533309-3c5c4400-d74f-11eb-9e6f-0c8a5f029c68.png" alt="image" /><ul><li>출처: <a href="https://www.youtube.com/channel/UCSEOUzkGNCT_29EU_vnBYjg">개발바닥 유튜브</a></ul><p><br /><h1 id="-id-generatedvalue">🚀 @Id, @GeneratedValue</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123519663-b0fb9800-d6e7-11eb-8874-f133ad697c92.png" alt="image" /><p><br /><p>일반적으로 <code class="language-plaintext highlighter-rouge">@Id</code>를 붙인 필드는 테이블의 기본키(PK)와 매핑된다.<p>다만 오해하지 않아야 할 것은 반드시 물리적인 기본키와 매핑될 필요는 없다는 것이다.<p>물리적인 기본키가 무슨 말이냐면, 데이터베이스에 설정되어있는 기본키를 말함이다.<p><code class="language-plaintext highlighter-rouge">Hibernate 공식 문서</code>에서는 <code class="language-plaintext highlighter-rouge">@Id</code>가 무조건 PK와 매핑될 필요가 없으며, 다만 식별할 수 있는 값이기만 하면 된다고 하고 있다.<p>이는 <code class="language-plaintext highlighter-rouge">영속성 컨텍스트(Persistence Context)</code>에 저장되는 엔티티들이 <code class="language-plaintext highlighter-rouge">@Id</code>를 <code class="language-plaintext highlighter-rouge">key</code>로 하여 <code class="language-plaintext highlighter-rouge">HashMap</code>으로 저장되는 특징 때문인 것으로 보인다.<p>하지만 대부분의 상황이 관례적인 방법으로 모두 해결이 가능하기 때문에 일반적으로 데이터베이스의 기본키와 매핑하여 사용되고 있으며 이러한 방법으로 해결할 수 없는 특별한 상황에 대해서는 다른 방법을 강구해야 할 테니, 이런 내용에 대해서는 알아두면 좋겠다 싶었다.<p> <p><code class="language-plaintext highlighter-rouge">Hibernate 공식 문서</code>에는 <code class="language-plaintext highlighter-rouge">@Id</code>에 다음과 같은 타입을 지원한다고 적혀있다.<p><br /><ul><li>자바 기본타입(primitive type): int, long, float, double 등등<li>자바 래퍼타입(wrapper type): Integer, Long 등<li>String<li>java.util.Date<li>java.sql.Date<li>java.math.BigDecimal<li>java.math.BigInteger</ul><p><br /><p><code class="language-plaintext highlighter-rouge">기본키</code>를 사용하는 많은 방법이 존재하지만 실무에서는 일반적으로 <code class="language-plaintext highlighter-rouge">primitive type</code>은 사용하지 않는다.<p>왜냐하면 <code class="language-plaintext highlighter-rouge">기본타입(primitive type)</code>인 <code class="language-plaintext highlighter-rouge">int</code>를 <code class="language-plaintext highlighter-rouge">id</code>로 사용한다고 하면, 값을 할당하지 않을 경우 0으로 초기화가 되는데 <u>이럴 경우 id가 0인 데이터에 대해서 id를 할당하지 않았기 때문에 0인 것인지, 아니면 어떠한 의도를 갖고 id를 0으로 할당한 것인지 알 수 없다.</u><p><br /><p>하지만 <code class="language-plaintext highlighter-rouge">오브젝트 타입(Object type)</code>의 경우 <code class="language-plaintext highlighter-rouge">nullable</code>하기 때문에 값을 초기화하지 않는다면 <code class="language-plaintext highlighter-rouge">null</code>로 초기화가 되며, 만약 이러한 상황에서 id 값이 0인 데이터를 발견했다면 이는 어떠한 의도가 있기 때문에 id가 0이라는 것을 보장해줄 수 있게 된다.<p><br /><p>따라서 위의 이유로 대부분 id 필드로 <code class="language-plaintext highlighter-rouge">Long</code>을 가장 많이 사용하며, 간혹 <code class="language-plaintext highlighter-rouge">String(UUID)</code>, <code class="language-plaintext highlighter-rouge">Integer</code>, <code class="language-plaintext highlighter-rouge">BigDecimal</code> 등을 사용하는 모습도 볼 수 있다.<p>만약 본인이 기본타입을 id 필드로 사용하고 있었다면 앞으로는 혹시 모를 곤혹스런 상황이 발생할 것에 미리 대비하며 <code class="language-plaintext highlighter-rouge">오브젝트 타입</code>을 사용하는 습관을 들이자.<p> <p><u>기본키가 아닌 필드</u>에 대해서는 약간 다르다.<p><br /><p>하이버네이트는 기본적으로 일반적인 필드도 <code class="language-plaintext highlighter-rouge">오브젝트 타입</code>을 사용하는걸 권장하고 있긴한데, 데이터베이스 컬럼에 <code class="language-plaintext highlighter-rouge">not null</code> 제약조건이 걸려있는 경우라면 약간 다르다.<p>비교적 최근에 하이버네이트는 필드가 기본타입일 경우 <code class="language-plaintext highlighter-rouge">not null</code> 제약 조건을 자동으로 적용하게끔 변경되었으므로, 이 경우 엔티티 클래스에서 오브젝트 타입을 사용하고 <code class="language-plaintext highlighter-rouge">@Column(nullable = false)</code>를 붙이기 보다는 기본타입을 사용하는걸 고려하라고 한다.<p>그리고 <code class="language-plaintext highlighter-rouge">코드 레벨</code>에서 <code class="language-plaintext highlighter-rouge">유효성 검사(Validation)</code>가 필요하다면 <code class="language-plaintext highlighter-rouge">Spring Validation</code>의 <code class="language-plaintext highlighter-rouge">@NotNull</code> 혹은 <code class="language-plaintext highlighter-rouge">Lombok</code>의 <code class="language-plaintext highlighter-rouge">@NonNull</code>을 사용하면 된다.<p> <p>실제로 테스트해본 결과 위 글대로 제대로 동작함을 확인했다.<p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file: 'for example'</span>
<span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span><span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
    
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> <span class="c1">// nullable</span>
    
    <span class="nd">@NonNull</span> <span class="c1">// &lt;- 둘중하나</span>
    <span class="nd">@NotNull</span> <span class="c1">// &lt;- 둘중하나</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span> <span class="c1">// not null</span>
<span class="o">}</span>
</code></pre></div></div><p> <p><a href="https://docs.jboss.org/hibernate/orm/5.3/userguide/html_single/Hibernate_User_Guide.html#entity-pojo-identifier">📜 하이버네이트 공식 문서</a><blockquote><p>We recommend that you declare consistently-named identifier attributes<p>on persistent classes and that you use a nullable (i.e., non-primitive) type.</blockquote><p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"request_log"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestLog</span><span class="o">{</span>
    <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span> <span class="c1">// 아무것도 작성하지 않으면 AUTO</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"request_log_id"</span><span class="o">)</span>
    <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123515965-c0251a80-d6d4-11eb-89e4-85d9466fc2f8.png" alt="image" /><p><br /><p>각 DB 벤더는 기본키 자동생성 전략이 있는데, 업계에서 가장 많이 사용되는 벤더인 Oracle, MySQL 은 다음과 같은 기본키 생성전략을 사용한다.<p> <ul><li><u>Oracle -&gt; sequence</u><li><u>MySQL -&gt; auto_increment</u></ul><p> <p>이러한 전략들을 JPA에서 사용하기 위해 <code class="language-plaintext highlighter-rouge">@GeneratedValue</code>를 사용하며, <code class="language-plaintext highlighter-rouge">@GeneratedValue</code>를 생략 할 경우 기본키 생성전략을 사용하지 않고 개발자가 직접 기본키를 할당해줘야 하기 때문에 <code class="language-plaintext highlighter-rouge">@GeneratedValue</code>는 필수가 아니지만 필수적으로 사용하게 된다.<p><br /><p><code class="language-plaintext highlighter-rouge">@GeneratedValue</code>를 사용하지 않을 경우 하기와 같은 방식으로 기본키를 직접 할당해줘야 한다.<p><br /><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="mi">1L</span><span class="o">)</span>
<span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span> <span class="c1">// 혹은 memberRepository.save(member);</span>
</code></pre></div></div><p><br /><p><code class="language-plaintext highlighter-rouge">@GeneratedValue</code>를 사용 할 경우는 하기와 같다.<p><br /><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>

<span class="c1">// 저장되며 id 자동 생성</span>
<span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span> <span class="c1">// 혹은 memberRepository.save(member);</span>
</code></pre></div></div><p><br /><p>왜 사용하느냐면, 만약 기본키를 직접 할당해야 할 경우 새로 할당하려는 값이 이미 DB에 저장되어 있다면 기본키 무결성 제약조건을 위반하여 <code class="language-plaintext highlighter-rouge">SQL Exception</code>이 떨어지게 된다.<p>하지만 이를 시스템에서 자동 생성하게 한다면 시스템이 알아서 새로 사용 할 수 있는 안전한 값을 찾아내어 생성하기 때문에 이러한 문제가 발생하지 않게 된다.<p><code class="language-plaintext highlighter-rouge">@GeneratedValue</code>의 기본키 생성전략은 아래와 같다.<p><br /><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">)</span>

<span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">SEQUENCE</span><span class="o">)</span>

<span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>

<span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span>
</code></pre></div></div><p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123519673-c670c200-d6e7-11eb-8891-a60684136238.png" alt="image" /><p><br /><p>Table 생성 전략은 실무에서 거의 사용하지 않으며,<code class="language-plaintext highlighter-rouge">MySQL</code> 혹은 <code class="language-plaintext highlighter-rouge">MariaDB</code> 같은것을 사용한다면 <code class="language-plaintext highlighter-rouge">IDENTITY</code>를 일반적으로 사용하고<code class="language-plaintext highlighter-rouge">Oracle</code>을 쓴다면 <code class="language-plaintext highlighter-rouge">SEQUENCE</code>를 사용한다.<p>외에 토이 프로젝트나 사이드 프로젝트의 경우는 기술전환이 자유롭게 행해지기 때문에 <code class="language-plaintext highlighter-rouge">AUTO</code>도 많이 사용되는 걸로 보인다.<p>이러한 기본키 생성 전략은 사실 JPA의 영역이라기 보다 DB의 영역이기 때문에 이러한 내용에 대해 잘 모르겠다면 JPA가 아닌 DB에 대한 선행 학습이 필요하다고 사료된다.<p><br /><p><code class="language-plaintext highlighter-rouge">IDENTITY</code>의 경우 한가지 중요한 내용이 있다.<p>DB의 <code class="language-plaintext highlighter-rouge">auto_increment</code> 기능을 사용 하고 JPA에서 <code class="language-plaintext highlighter-rouge">@GeneratedValue(strategy = GenerationType.IDENTITY)</code>를 사용하는 경우 트랜잭션 작업이 들어가야지만 할당해야 할 <code class="language-plaintext highlighter-rouge">id</code>값을 알 수 있기 때문에 <code class="language-plaintext highlighter-rouge">insert 쿼리</code>에 대해 쓰기지연 기능이 제대로 동작하지 않고 즉시 <code class="language-plaintext highlighter-rouge">insert 쿼리</code>가 발생한다.<p><br /><p>같은 원리로 <code class="language-plaintext highlighter-rouge">batch insert</code>도 제대로 동작하지 않기 때문에 이 경우 <code class="language-plaintext highlighter-rouge">JdbcTemplate</code>나 <code class="language-plaintext highlighter-rouge">Mybatis</code> 등의 사용을 고려하게 된다.<p><br /><h1 id="-column">🚀 @Column</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123532547-f9976d80-d748-11eb-8dfc-caeef60b304c.png" alt="image" /><p><br /><p>엔티티 필드와 테이블 컬럼을 매핑하는데 사용한다.<p>기본값은 위와 같으며, 주로 사용되는 옵션은 <code class="language-plaintext highlighter-rouge">name</code>정도다.<p>나머지는 DDL 옵션과 관계가 있는데 실무에서는 보통 DB구축이 이미 돼있는 상황에 매핑을 하기만 하는 경우가 일반적이고, 혹시 모를 사고를 대비하기 위해 DDL 옵션을 끄거나(none), 유효성 검사(validate)정도만 사용하는 경우가 대부분이기 때문에<p>나머지 DDL 관련 옵션들은 적용되지 않는다.<p><br /><table><thead><tr><th>속성<th>기능<th>기본값<tbody><tr><td>name<td>필드와 매핑할 테이블의 컬럼명<td>객체의 필드명<tr><td>insertable<td>엔티티 저장 시 이 필드도 같이 저장 <br /> false로 설정하면 이 필드는 데이터베이스에 저장하지 않음<td>true<tr><td>updatable<td>엔티티 수정 시 이 필드도 같이 수정 <br /> false로 설정하면 이 필드는 데이터베이스에 수정하지 않음<td>true<tr><td>table<td>하나의 엔티티를 두 개 이상의 테이블에 매핑할 때 사용. <br /><td>현재 클래스가 매핑 된 테이블<tr><td>nullable<td>null 허용 여부로, false로 설정하면 DDL 옵션으로 인한 DDL 생성 시<br /> 컬럼에 not null 제약조건이 붙는다<td>true<tr><td>unique<td><code class="language-plaintext highlighter-rouge">@Table</code>의 <code class="language-plaintext highlighter-rouge">uniqueConstraints</code>는 복합 유니크 인덱스를 생성할 때 사용하며, <br /> 이 기능은 단일 유니크 인덱스를 생성할 때 사용<td>-<tr><td>columnDefinition<td>데이터 베이스 컬럼 정보를 직접 입력한다(Native)<td>-<tr><td>length<td>문자 길이 제약 조건, String 에만 사용<td>255<tr><td>precision<td>BigDecimal, BigInteger 타입 사용시 사용한다.<br /> 정밀도를 의미하는데, 전체 자릿수를 의미한다<td>0<tr><td>scale<td>BigDecimal, BigInteger 타입 사용시 사용한다.<br /> 스케일은 소수점 이하 자리수를 의미한다<td>0</table><p><br /><h1 id="-enumerated">🚀 @Enumerated</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123532762-ff8e4e00-d74a-11eb-965a-d8d18259a8d0.png" alt="image" /><p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123532763-06b55c00-d74b-11eb-823b-137c62feedd9.png" alt="image" /><p><br /><p>보통 어떤 상태값을 표현하는데 많이들 사용한다.<p>예로 들만한 대표적인 enum 클래스는 <code class="language-plaintext highlighter-rouge">spring-web</code>의 <code class="language-plaintext highlighter-rouge">org.springframework.http.HttpStatus</code> 라고 볼 수 있겠다.<p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123533188-3ca80f80-d74e-11eb-8d1a-b01391470053.png" alt="image" /><p><br /><p>엔티티에서는 보통 어떤 상태값에 대해 enum 클래스를 작성하고, 이에 부수적인 기능들을 추가하여 엔티티 필드에 매핑해 사용하는데<p>이때 <code class="language-plaintext highlighter-rouge">Ordinal</code>, <code class="language-plaintext highlighter-rouge">String</code> 을 선택한다. 이것에 대해서는 공식이라고 생각해도 좋겠다. 무조껀 <code class="language-plaintext highlighter-rouge">String</code>을 사용하자.<p><code class="language-plaintext highlighter-rouge">Ordinal</code>은 enum 클래스의 상수 필드 순서를 <code class="language-plaintext highlighter-rouge">Integer</code> 타입으로 사용하게 되는데, enum 클래스에 변경사항이 생겨<p>상수 필드의 순서가 바뀐다면 관련된 모든 코드에 에러가 발생하게 된다. (OCP 위반)<p><code class="language-plaintext highlighter-rouge">String</code>은 enum 클래스의 상수 필드명 자체를 사용하기 때문에 enum 클래스에 변경사항이 생겨도 다른 코드에 영향을 주지 않는다.<p><code class="language-plaintext highlighter-rouge">Ordinal</code>이 <code class="language-plaintext highlighter-rouge">String</code>에 비해 좋은 점도 분명히 있긴 한데, 실무에서는 사소한 성능상의 이점보다 휴먼에러를 줄이는 것이 더 중요한 과제이기 때문에<p>성능상 손해를 좀 보더라도 안전한 코드를 작성하는게 더 좋다고 생각한다.<p><br /><h1 id="-temporal">🚀 @Temporal</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123533058-5bf26d00-d74d-11eb-8936-5b75ec60c0e3.png" alt="image" /><p><br /><p><code class="language-plaintext highlighter-rouge">Date</code>와 <code class="language-plaintext highlighter-rouge">Calendar</code>관련 어노테이션인데, 이 두 클래스는 현 시점에서 자바 플랫폼 라이브러리에서 실패한 클래스이므로 따로 작성하지 않는다.<p>이 객체들은 별다른 노하우가 없던 자바 초창기에 불변 객체로 만들어지지 못했었고, 이로 인한 많은 문제가 발생하고 있다.<p>자바 8이 주류로 자리잡고 <code class="language-plaintext highlighter-rouge">Date</code>와 <code class="language-plaintext highlighter-rouge">Calendar</code>의 대부분 Public API가 <code class="language-plaintext highlighter-rouge">Deprecated</code> 됐으며<p><code class="language-plaintext highlighter-rouge">LocalDate</code>, <code class="language-plaintext highlighter-rouge">LocalDateTime</code>이 주류로 사용되고 있는 현 시점에서<p><code class="language-plaintext highlighter-rouge">Date</code>와 <code class="language-plaintext highlighter-rouge">Calendar</code>를 사용한다는 것은 시대를 역행하는 것이라고 생각하기 때문에<p>이에 관해 궁금하신 분은 다른 자료가 많으니 직접 찾아보는 것을 추천드린다.<p> <p>일단 알아야 할 것은 만약 <code class="language-plaintext highlighter-rouge">Hibernate</code>를 사용하는데 <code class="language-plaintext highlighter-rouge">Date</code>나 <code class="language-plaintext highlighter-rouge">Calendar</code>를 사용한다면 <code class="language-plaintext highlighter-rouge">@Temporal</code>을 반드시 사용해야 하며,<p><code class="language-plaintext highlighter-rouge">LocalDate</code>나 <code class="language-plaintext highlighter-rouge">LocalDateTime</code>을 사용한다면 별다른 어노테이션을 작성하지 않아도 된다.<p>자바 초창기에 <code class="language-plaintext highlighter-rouge">Hibernate</code>에서 자바의 <code class="language-plaintext highlighter-rouge">Date</code>를 지원하기 위해 작성된 기능이므로 현 시점에서는 거의 사용되지 않는다.<p><br /><h1 id="-lob">🚀 @Lob</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123533064-6876c580-d74d-11eb-9133-82d950533243.png" alt="image" /><p><br /><p>데이터베이스의 <code class="language-plaintext highlighter-rouge">BLOB</code>, <code class="language-plaintext highlighter-rouge">CLOB</code> 타입과 매핑한다.<p>중요하지 않다고 생각되어 자세한 내용은 작성하지 않는다.<p><br /><h1 id="-transient">🚀 @Transient</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123533074-7c222c00-d74d-11eb-8ffc-48e5856a6683.png" alt="image" /><p><br /><p>데이터베이스와 무관한 필드임을 명시하는 어노테이션이다.<p>주로 엔티티에서 데이터베이스 테이블과 관련되지 않는 데이터를 작업하거나 할 때 사용한다.<p>생각보다 종종 사용할 일이 있었다.<p><br /><h1 id="-access">🚀 @Access</h1><hr /><p><img src="https://user-images.githubusercontent.com/71188307/123533175-226e3180-d74e-11eb-835a-f198df96b8cf.png" alt="image" /><p><br /><p><img src="https://user-images.githubusercontent.com/71188307/123533178-2732e580-d74e-11eb-8fd2-5b5418a9fd03.png" alt="image" /><p><br /><p>JPA가 엔티티에 접근하는 방식을 지정한다<p>필드 접근과 프로퍼티 접근의 투트랙이 존재한다.<p>이 어노테이션을 생략하면 <code class="language-plaintext highlighter-rouge">@Id</code>의 위치에 따라 결정된다.<p>우선순위는 <code class="language-plaintext highlighter-rouge">@Access</code>를 명시하는 것이 더 높다.<p><br /><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Access</span><span class="o">(</span><span class="nc">AccessType</span><span class="o">.</span><span class="na">FIELD</span><span class="o">)</span> <span class="c1">// 생략해도 무방</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span><span class="o">{</span>
    <span class="nd">@Id</span> <span class="c1">// 필드에 위치</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="c1">// omitted for brevity</span>
<span class="o">}</span>

<span class="nd">@Entity</span>
<span class="nd">@Access</span><span class="o">(</span><span class="nc">AccessType</span><span class="o">.</span><span class="na">PROPERTY</span><span class="o">)</span> <span class="c1">// 생략해도 무방</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Id</span> <span class="c1">// 접근자에 위치</span>
    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// omitted for brevity</span>
<span class="o">}</span>
</code></pre></div></div><p><br /></article><hr class="dingbat related mb6" /><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"> <img src="/assets/img/me.gif" srcset="/assets/img/me.gif 1x,/assets/img/me.gif 2x" alt="shirohoo" class="avatar" width="120" height="120" loading="lazy" /><h2 class="page-title hr-bottom"> About Me</h2><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/shirohoo" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:shirohoo4102@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://shirohoo.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></aside><aside class="other-projects related mb0" role="complementary"><h2>Related Posts</h2><div class="columns"><div class="column column-1-2"><article class="project-card"> <a href="/spring/spring-data-jpa/2021-06-30-jpa-5/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img"> <img src="/assets/img/spring/spring-data-jpa/hibernate.jpg" alt="JPA 기초 5 - 연관관계 매핑 기초" width="864" height="486" loading="lazy"/></div></a><h3 class="project-card-title flip-project-title"> <a href="/spring/spring-data-jpa/2021-06-30-jpa-5/" class="flip-title">JPA 기초 5 - 연관관계 매핑 기초</a></h3><p class="project-card-text fine" property="disambiguatingDescription"> <code class="language-plaintext highlighter-rouge">연관관계 매핑 기초</code>를 학습합니다 <a class="fill-card no-hover" href="/spring/spring-data-jpa/2021-06-30-jpa-5/" tabindex="-1"><span class="sr-only">Continue reading JPA 기초 5 - 연관관계 매핑 기초</span></a></article></div><div class="column column-1-2"><article class="project-card"> <a href="/spring/spring-data-jpa/2021-06-23-jpa-3/" class="no-hover no-print-link flip-project" tabindex="-1"><div class="project-card-img aspect-ratio sixteen-nine flip-project-img"> <img src="/assets/img/spring/spring-data-jpa/hibernate.jpg" alt="JPA 기초 3 - 영속성 컨텍스트(Persistence Context)" width="864" height="486" loading="lazy"/></div></a><h3 class="project-card-title flip-project-title"> <a href="/spring/spring-data-jpa/2021-06-23-jpa-3/" class="flip-title">JPA 기초 3 - 영속성 컨텍스트(Persistence Context)</a></h3><p class="project-card-text fine" property="disambiguatingDescription"> <code class="language-plaintext highlighter-rouge">영속성 컨텍스트(Persistence Context)</code>에 대한 기본 개념 <a class="fill-card no-hover" href="/spring/spring-data-jpa/2021-06-23-jpa-3/" tabindex="-1"><span class="sr-only">Continue reading JPA 기초 3 - 영속성 컨텍스트(Persistence Context)</span></a></article></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Random Posts</h2><ul class="related-posts"><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2021-04-26T20:02:00+00:00">26 Apr 2021</time> <a href="/ide/intellij/2021-04-26-intellij-2021.1/" class="flip-title"><span>인텔리제이(IntelliJ) 2021.1 업데이트</span></a></div><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2021-06-14T21:19:00+00:00">14 Jun 2021</time> <a href="/spring/spring-batch/2021-06-14-btach-introduction/" class="flip-title"><span>Spring Batch 개요</span></a></div><li class="h6"><div> <time style="display: inline-block; margin-right: 1rem;" class="faded fine" datetime="2021-05-11T19:55:00+00:00">11 May 2021</time> <a href="/backend/java/2021-05-11-for-loop/" class="flip-title"><span>중첩 for문 성능 차이</span></a></div></ul></aside><aside class="comments related" role="complementary"><h2 class="hr-bottom">Comments</h2><script src="https://utteranc.es/client.js" repo= shirohoo/shirohoo.github.io.comments issue-term= pathname theme= github-light crossorigin= "anonymous" async> </script></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2022. All rights reserved. </small><nav class="legal"><small> <a class="heading flip-title" href="/LICENSE/">LICENSE</a> </small></nav><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(8,46,57);background-image:url(/assets/img/sidebar-bg.gif)"></div><div class="sidebar-sticky"><div class="sidebar-about"> <a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/me.gif" class="avatar" alt="돈 받고 일하면 프로" width="120" height="120" loading="lazy" /> </a> <a class="sidebar-title" href="/"><h2 class="h1">돈 받고 일하면 프로</h2></a><p class=""> 우리는 직장에서 훈련을 하기 때문에 매번 실수를 반복한다</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li><div class="menu-wrapper" onmouseover="javascript:spread(9)" onmouseout="javascript:spread(9)"> <a id="_drawer--opened" href="/about/" class="sidebar-nav-item " > About Me </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(10)" onmouseout="javascript:spread(10)"> <a href="/diary/" class="sidebar-nav-item " > Diary </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(11)" onmouseout="javascript:spread(11)"> <a href="/financial/" class="sidebar-nav-item " > Financial </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(12)" onmouseout="javascript:spread(12)"> <a href="/debugging/" class="sidebar-nav-item " > Debugging </a></div><li><div class="menu-wrapper" onmouseover="javascript:spread(13)" onmouseout="javascript:spread(13)"> <button class="spread-btn"> <span id="spread-icon-13" class="material-icons">arrow_right</span> </button> <a href="/cs/" class="sidebar-nav-item " > Computer Science </a><div id="submenu-13" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/cs/operating-system/" > 운영체제 </a><li> <a class="sidebar-nav-item " href="/cs/software-design/" > 소프트웨어 설계 </a><li> <a class="sidebar-nav-item " href="/cs/database-construct/" > 데이터베이스 구축 </a><li> <a class="sidebar-nav-item " href="/cs/leverage-programming/" > 프로그래밍 활용 </a><li> <a class="sidebar-nav-item " href="/cs/information-system/" > 정보시스템 구축 </a><li> <a class="sidebar-nav-item " href="/cs/data-structure-algorithm/" > 자료구조 & 알고리즘 </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(14)" onmouseout="javascript:spread(14)"> <button class="spread-btn"> <span id="spread-icon-14" class="material-icons">arrow_right</span> </button> <a href="/backend/" class="sidebar-nav-item " > BackEnd </a><div id="submenu-14" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/backend/test/" > Test </a><li> <a class="sidebar-nav-item " href="/backend/java/" > Java </a><li> <a class="sidebar-nav-item " href="/backend/python/" > Python </a><li> <a class="sidebar-nav-item " href="/backend/groovy/" > Groovy </a><li> <a class="sidebar-nav-item " href="/backend/gradle/" > Gradle </a><li> <a class="sidebar-nav-item " href="/backend/database/" > Database </a><li> <a class="sidebar-nav-item " href="/backend/server-side/" > Server Side </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(15)" onmouseout="javascript:spread(15)"> <button class="spread-btn"> <span id="spread-icon-15" class="material-icons">arrow_right</span> </button> <a href="/spring/" class="sidebar-nav-item " > Spring </a><div id="submenu-15" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/spring/spring-boot/" > Spring Boot </a><li> <a class="sidebar-nav-item " href="/spring/spring-mvc/" > Spring MVC </a><li> <a class="sidebar-nav-item " href="/spring/spring-security/" > Spring Security </a><li> <a class="sidebar-nav-item " href="/spring/spring-data-jpa/" > Spring Data Jpa </a><li> <a class="sidebar-nav-item " href="/spring/spring-batch/" > Spring Batch </a><li> <a class="sidebar-nav-item " href="/spring/spring-webflux/" > Spring WebFlux </a><li> <a class="sidebar-nav-item " href="/spring/spring-cloud/" > Spring Cloud </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(16)" onmouseout="javascript:spread(16)"> <button class="spread-btn"> <span id="spread-icon-16" class="material-icons">arrow_right</span> </button> <a href="/frontend/" class="sidebar-nav-item " > FrontEnd </a><div id="submenu-16" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/frontend/javascript/" > Javascript </a><li> <a class="sidebar-nav-item " href="/frontend/vue/" > Vue.js </a></ul></div></div><li><div class="menu-wrapper" onmouseover="javascript:spread(17)" onmouseout="javascript:spread(17)"> <button class="spread-btn"> <span id="spread-icon-17" class="material-icons">arrow_right</span> </button> <a href="/ide/" class="sidebar-nav-item " > IDE </a><div id="submenu-17" class="menu-wrapper submenu hide"><ul style="list-style: none;"><li> <a class="sidebar-nav-item " href="/ide/intellij/" > IntelliJ </a></ul></div></div></ul></nav><div style="text-align:center;"> <a href="https://hits.seeyoufarm.com"> <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fshirohoo.github.io&count_bg=%23A30AC9&title_bg=%23686262&icon=electron.svg&icon_color=%23FFFFFF&title=hits&edge_flat=false"/> </a></div><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/shirohoo" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:shirohoo4102@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://shirohoo.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/assets/js/hydejack-9.1.5.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.1.5.js" nomodule defer></script> <!-- mouse event cancel --> <script> document.oncontextmenu = function (e) { return false; }; document.onselectstart = function (e) { return false; }; </script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ ga('create', 'G-NKVY3834TW', 'auto'); /**/ var pushStateEl = d.getElementById('_pushState'); var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template> <template id="_dark-mode-template"> <button id="_dark-mode" class="nav-btn no-hover" > <span class="sr-only">Dark Mode</span> <span class="icon-brightness-contrast"></span> </button> </template> <template id="_search-template"> <button id="_search" class="nav-btn no-hover"> <label class="sr-only" for="_search-input">Search</label> <span class="icon-search"></span> </button><div id="_search-box"> <input id="_search-input" type="search" class="form-control form-control-lg nav-btn" placeholder="Type something…" /> <button type="reset" class="nav-btn no-hover"> <span class="sr-only">Close</span> <span class="icon-cross"></span> </button></div><div id="_hits"></div></template></div></html>
